<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R – Workspace</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../src/notes/quarto.html" rel="next">
<link href="../../src/notes/code-files.html" rel="prev">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-2fef5ea3f8957b3e4ecc936fc74692ca.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-309b621b51e4adb6ecf92aff05fdd208.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-30f6bbbfead6c75822db7ff259feeddc.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-309b621b51e4adb6ecf92aff05fdd208.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script><link rel="stylesheet" href="../../sty/styles.css">
</head>
<body class="nav-sidebar docked quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/notes/_notes.html">Notes</a></li><li class="breadcrumb-item"><a href="../../src/notes/r.html"><span class="chapter-title">R</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">HashCX</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/hashcx/workspace/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../src/notes/_notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Notes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/file_org.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">File Organization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/eda.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Exploartory Data Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/code-files.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Code Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/r.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/quarto.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/rstudio.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">RStudio</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/windows.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Microsoft Windows</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/notes/webhost.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Web Hosting</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../src/r4ds/_r4ds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R for Data Science (2e)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/01-data-viz.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Visualization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/02-workflow-basics.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Workflow: Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/03-data-trans.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Transformation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/04-workflow-code-style.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Workflow: Code Style</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/05-data-tidying.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Tidying</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/06-workflow-scripts-and-projects.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Workflow: Scripts &amp; Projects</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/r4ds/07-data-import.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Data Import</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/projects/topic-modeling-r.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Topic Modeling in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/projects/scrap_mac_registrar.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">WIP: Web Scrap Mac Class Schedule</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#r-packages" id="toc-r-packages" class="nav-link active" data-scroll-target="#r-packages">R Packages</a></li>
  <li><a href="#dataset-in-packages" id="toc-dataset-in-packages" class="nav-link" data-scroll-target="#dataset-in-packages">Dataset in Packages</a></li>
  <li>
<a href="#primitive-data-types" id="toc-primitive-data-types" class="nav-link" data-scroll-target="#primitive-data-types">Primitive Data Types</a>
  <ul class="collapse">
<li><a href="#mixing-data-types" id="toc-mixing-data-types" class="nav-link" data-scroll-target="#mixing-data-types">Mixing Data Types</a></li>
  </ul>
</li>
  <li><a href="#compound-data-types" id="toc-compound-data-types" class="nav-link" data-scroll-target="#compound-data-types">Compound Data Types</a></li>
  <li><a href="#basics-operations" id="toc-basics-operations" class="nav-link" data-scroll-target="#basics-operations">Basics Operations</a></li>
  <li>
<a href="#initial-steps" id="toc-initial-steps" class="nav-link" data-scroll-target="#initial-steps">Initial Steps</a>
  <ul class="collapse">
<li><a href="#file-paths" id="toc-file-paths" class="nav-link" data-scroll-target="#file-paths">File Paths</a></li>
  <li><a href="#store-locally" id="toc-store-locally" class="nav-link" data-scroll-target="#store-locally">Store Locally</a></li>
  <li><a href="#load-locally" id="toc-load-locally" class="nav-link" data-scroll-target="#load-locally">Load Locally</a></li>
  <li><a href="#clean-names" id="toc-clean-names" class="nav-link" data-scroll-target="#clean-names">Clean Names</a></li>
  <li><a href="#inspecting-data" id="toc-inspecting-data" class="nav-link" data-scroll-target="#inspecting-data">Inspecting Data</a></li>
  <li><a href="#dealing-with-factor-categorical-columns" id="toc-dealing-with-factor-categorical-columns" class="nav-link" data-scroll-target="#dealing-with-factor-categorical-columns">Dealing with Factor (Categorical) Columns</a></li>
  <li><a href="#basic-plotting" id="toc-basic-plotting" class="nav-link" data-scroll-target="#basic-plotting">Basic Plotting</a></li>
  </ul>
</li>
  <li>
<a href="#data-manipulation" id="toc-data-manipulation" class="nav-link" data-scroll-target="#data-manipulation">Data Manipulation</a>
  <ul class="collapse">
<li><a href="#selection" id="toc-selection" class="nav-link" data-scroll-target="#selection">Selection</a></li>
  <li><a href="#piping" id="toc-piping" class="nav-link" data-scroll-target="#piping">Piping</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count">Count</a></li>
  <li><a href="#reshaping" id="toc-reshaping" class="nav-link" data-scroll-target="#reshaping">Reshaping</a></li>
  <li><a href="#filtering" id="toc-filtering" class="nav-link" data-scroll-target="#filtering">Filtering</a></li>
  <li><a href="#saving-to-disk" id="toc-saving-to-disk" class="nav-link" data-scroll-target="#saving-to-disk">Saving to disk</a></li>
  </ul>
</li>
  <li>
<a href="#visualization" id="toc-visualization" class="nav-link" data-scroll-target="#visualization">Visualization</a>
  <ul class="collapse">
<li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot">Scatter plot</a></li>
  <li><a href="#boxplot" id="toc-boxplot" class="nav-link" data-scroll-target="#boxplot">Boxplot</a></li>
  <li><a href="#time-series-data" id="toc-time-series-data" class="nav-link" data-scroll-target="#time-series-data">Time series data</a></li>
  </ul>
</li>
  <li>
<a href="#colors" id="toc-colors" class="nav-link" data-scroll-target="#colors">Colors</a>
  <ul class="collapse">
<li><a href="#cols4all-package" id="toc-cols4all-package" class="nav-link" data-scroll-target="#cols4all-package">cols4all package</a></li>
  </ul>
</li>
  <li>
<a href="#spatial-data" id="toc-spatial-data" class="nav-link" data-scroll-target="#spatial-data">Spatial Data</a>
  <ul class="collapse">
<li><a href="#projections" id="toc-projections" class="nav-link" data-scroll-target="#projections">Projections</a></li>
  </ul>
</li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hashcx/workspace/edit/main/src/notes/r.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hashcx/workspace/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/notes/_notes.html">Notes</a></li><li class="breadcrumb-item"><a href="../../src/notes/r.html"><span class="chapter-title">R</span></a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-title">R</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header><section id="r-packages" class="level2"><h2 class="anchored" data-anchor-id="r-packages">R Packages</h2>
<p>An R package usually includes:</p>
<ul>
<li>reusable functions</li>
<li>documentation describing how to use the function</li>
<li>sample data</li>
</ul></section><section id="dataset-in-packages" class="level2"><h2 class="anchored" data-anchor-id="dataset-in-packages">Dataset in Packages</h2>
<p>To list datasets in all the available packages, use the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/zpackages.html">.packages</a></span><span class="op">(</span>all.available <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="primitive-data-types" class="level2"><h2 class="anchored" data-anchor-id="primitive-data-types">Primitive Data Types</h2>
<p>The primitive (also known as singleton/simple) data types in R are:</p>
<ul>
<li>character</li>
<li>numeric</li>
<li>logical</li>
<li>raw</li>
<li>imaginary numbers</li>
</ul>
<p>To know the datatype of an object, run the command:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># give the data type of x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To know the type of the variables of each variable.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="mixing-data-types" class="level3"><h3 class="anchored" data-anchor-id="mixing-data-types">Mixing Data Types</h3>
<ul>
<li>character + numeric –&gt; character</li>
<li>numeric + logical –&gt; numeric</li>
<li>numeric + character + logical –&gt; character</li>
</ul></section></section><section id="compound-data-types" class="level2"><h2 class="anchored" data-anchor-id="compound-data-types">Compound Data Types</h2>
<p>The compound (also know as collection/sttructure) data types in R are:</p>
<ul>
<li>
<strong>vector</strong>: hold single type of data</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Creating Vector
</div>
</div>
<div class="callout-body-container callout-body">
<p>The <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function (<strong>c</strong>ombine multiple elements) can be used to create vectors in R.</p>
<pre><code>x &lt;- c(1, 2, 3, 4)</code></pre>
</div>
</div>
<ul>
<li>
<strong>matrix</strong>: 2D vector</li>
<li>
<strong>array</strong>: nD vector</li>
<li>
<strong>list</strong>: generic vector, can hold mixed type of data, eg, one element can be a character, another can be a list of integers, and the third could be a logical</li>
<li>
<strong>data frame</strong>: table where columns represent vectors</li>
<li>
<strong>tibbles</strong>: data frames, but slightly tweaked to work better with <code>tidyverse</code>–when printing tibbles, only the first few columns that fit into the screen will be shown</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Printing tibble All Columns
</div>
</div>
<div class="callout-body-container callout-body">
<p>To force the <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> function to print all the columns of a <code>tibble</code>, set the <code>width</code> parameter to <code>Inf</code> as follows:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">ds</span>, width <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<p>To construct small tibble by hand, use the <code>tribble</code> function as follows:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>var1, <span class="sc">~</span>var2, <span class="sc">~</span>var3</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"A"</span>, <span class="dv">1</span>, <span class="cn">TRUE</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"B"</span>, <span class="dv">2</span>, <span class="cn">FALSE</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C"</span>, <span class="dv">3</span>, <span class="cn">TRUE</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>factor</strong></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="fig-datastructure" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-datastructure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../images/datastructure.png" class="img-fluid figure-img" width="256">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datastructure-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4.1: Common data structures in R ( taken from <a href="https://jjallaire.github.io/hopr/objects.html">Grolemund, 2014</a>)
</figcaption></figure>
</div>
</div>
</div>
<p>To know the data structure and length of the object, run the command:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># give the structure type of x</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># length of structure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="basics-operations" class="level2"><h2 class="anchored" data-anchor-id="basics-operations">Basics Operations</h2>
<p>Assignment</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span> <span class="co"># assign 3 to x (x gets 3)</span></span>
<span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">3</span><span class="op">)</span> <span class="co"># assign 3 to x (x gets 3) &amp; print the result to console</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
<p>Getting Help</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/args.html">args</a></span><span class="op">(</span><span class="va">round</span><span class="op">)</span> <span class="co"># print the argument list of function</span></span>
<span><span class="op">?</span><span class="va">round</span> <span class="co"># show documentation of function in Help window</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Dealing with Structure</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># concatenate set of values to create vector</span></span>
<span><span class="va">weight_g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">3</span>, <span class="fl">9</span><span class="op">)</span></span>
<span><span class="va">animals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dog"</span>, <span class="st">"bat"</span>, <span class="st">"cat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># utilizing logical values to pull specific values</span></span>
<span><span class="va">weight_g</span><span class="op">[</span><span class="va">weight_g</span> <span class="op">&lt;</span> <span class="fl">10</span> <span class="op">&amp;</span> <span class="va">weight_g</span> <span class="op">&gt;</span> <span class="fl">60</span> <span class="op">|</span> <span class="va">weight_g</span> <span class="op">==</span> <span class="fl">50</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pull dog &amp; cat records</span></span>
<span><span class="va">animals</span><span class="op">[</span><span class="va">animals</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dog"</span>, <span class="st">"cat"</span><span class="op">)</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dog" "cat"</code></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">animals</span><span class="op">[</span><span class="va">animals</span> <span class="op">==</span> <span class="st">"dog"</span> <span class="op">|</span> <span class="va">animals</span> <span class="op">==</span> <span class="st">"cat"</span><span class="op">]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dog" "cat"</code></pre>
</div>
</div>
<p>Statistics</p>
<div class="cell">
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># signaling missing data using NA</span></span>
<span><span class="va">heights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="cn">NA</span>, <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get mean while ignoring missing data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">heights</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># how to use mean</span></span>
<span><span class="co"># ?mean</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="initial-steps" class="level2"><h2 class="anchored" data-anchor-id="initial-steps">Initial Steps</h2>
<section id="file-paths" class="level3"><h3 class="anchored" data-anchor-id="file-paths">File Paths</h3>
<p>The <code>here</code> package makes it easy to point to files starting from the project main directory.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://here.r-lib.org/">"here"</a></span>, <span class="st">"janitor"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="store-locally" class="level3"><h3 class="anchored" data-anchor-id="store-locally">Store Locally</h3>
<p>Loading file from repository and saving it locally on disk. It is always a good idea to structure the workspace–for more information, see <a href="http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1001745">Best Practices for Scientific Computing paper</a>.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="st">"portal_data_joined.csv"</span></span>
<span><span class="va">file_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://here.r-lib.org/reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="va">file_name</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span></span>
<span>    url <span class="op">=</span> <span class="st">"https://ndownloader.figshare.com/files/2292169"</span>,</span>
<span>    destfile <span class="op">=</span> <span class="va">file_path</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="load-locally" class="level3"><h3 class="anchored" data-anchor-id="load-locally">Load Locally</h3>
<div class="cell">
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="va">file_path</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">glimpse</span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 34,786
Columns: 13
$ record_id       &lt;int&gt; 1, 72, 224, 266, 349, 363, 435, 506, 588, 661, 748, 84…
$ month           &lt;int&gt; 7, 8, 9, 10, 11, 11, 12, 1, 2, 3, 4, 5, 6, 8, 9, 10, 1…
$ day             &lt;int&gt; 16, 19, 13, 16, 12, 12, 10, 8, 18, 11, 8, 6, 9, 5, 4, …
$ year            &lt;int&gt; 1977, 1977, 1977, 1977, 1977, 1977, 1977, 1978, 1978, …
$ plot_id         &lt;int&gt; 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, …
$ species_id      &lt;chr&gt; "NL", "NL", "NL", "NL", "NL", "NL", "NL", "NL", "NL", …
$ sex             &lt;chr&gt; "M", "M", "", "", "", "", "", "", "M", "", "", "M", "M…
$ hindfoot_length &lt;int&gt; 32, 31, NA, NA, NA, NA, NA, NA, NA, NA, NA, 32, NA, 34…
$ weight          &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, 218, NA, NA, 204, 200,…
$ genus           &lt;chr&gt; "Neotoma", "Neotoma", "Neotoma", "Neotoma", "Neotoma",…
$ species         &lt;chr&gt; "albigula", "albigula", "albigula", "albigula", "albig…
$ taxa            &lt;chr&gt; "Rodent", "Rodent", "Rodent", "Rodent", "Rodent", "Rod…
$ plot_type       &lt;chr&gt; "Control", "Control", "Control", "Control", "Control",…</code></pre>
</div>
</div>
</section><section id="clean-names" class="level3"><h3 class="anchored" data-anchor-id="clean-names">Clean Names</h3>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://sfirke.github.io/janitor/reference/clean_names.html">clean_names</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="inspecting-data" class="level3"><h3 class="anchored" data-anchor-id="inspecting-data">Inspecting Data</h3>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span> <span class="co"># data type</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span> <span class="co"># structure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   34786 obs. of  13 variables:
 $ record_id      : int  1 72 224 266 349 363 435 506 588 661 ...
 $ month          : int  7 8 9 10 11 11 12 1 2 3 ...
 $ day            : int  16 19 13 16 12 12 10 8 18 11 ...
 $ year           : int  1977 1977 1977 1977 1977 1977 1977 1978 1978 1978 ...
 $ plot_id        : int  2 2 2 2 2 2 2 2 2 2 ...
 $ species_id     : chr  "NL" "NL" "NL" "NL" ...
 $ sex            : chr  "M" "M" "" "" ...
 $ hindfoot_length: int  32 31 NA NA NA NA NA NA NA NA ...
 $ weight         : int  NA NA NA NA NA NA NA NA 218 NA ...
 $ genus          : chr  "Neotoma" "Neotoma" "Neotoma" "Neotoma" ...
 $ species        : chr  "albigula" "albigula" "albigula" "albigula" ...
 $ taxa           : chr  "Rodent" "Rodent" "Rodent" "Rodent" ...
 $ plot_type      : chr  "Control" "Control" "Control" "Control" ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">glimpse</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 0
Columns: 13
$ record_id       &lt;int&gt; 
$ month           &lt;int&gt; 
$ day             &lt;int&gt; 
$ year            &lt;int&gt; 
$ plot_id         &lt;int&gt; 
$ species_id      &lt;chr&gt; 
$ sex             &lt;chr&gt; 
$ hindfoot_length &lt;int&gt; 
$ weight          &lt;int&gt; 
$ genus           &lt;chr&gt; 
$ species         &lt;chr&gt; 
$ taxa            &lt;chr&gt; 
$ plot_type       &lt;chr&gt; </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span> <span class="co"># dimensions</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34786    13</code></pre>
</div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 34786</code></pre>
</div>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   record_id         month             day            year         plot_id     
 Min.   :    1   Min.   : 1.000   Min.   : 1.0   Min.   :1977   Min.   : 1.00  
 1st Qu.: 8964   1st Qu.: 4.000   1st Qu.: 9.0   1st Qu.:1984   1st Qu.: 5.00  
 Median :17762   Median : 6.000   Median :16.0   Median :1990   Median :11.00  
 Mean   :17804   Mean   : 6.474   Mean   :16.1   Mean   :1990   Mean   :11.34  
 3rd Qu.:26655   3rd Qu.:10.000   3rd Qu.:23.0   3rd Qu.:1997   3rd Qu.:17.00  
 Max.   :35548   Max.   :12.000   Max.   :31.0   Max.   :2002   Max.   :24.00  
                                                                               
  species_id            sex            hindfoot_length     weight      
 Length:34786       Length:34786       Min.   : 2.00   Min.   :  4.00  
 Class :character   Class :character   1st Qu.:21.00   1st Qu.: 20.00  
 Mode  :character   Mode  :character   Median :32.00   Median : 37.00  
                                       Mean   :29.29   Mean   : 42.67  
                                       3rd Qu.:36.00   3rd Qu.: 48.00  
                                       Max.   :70.00   Max.   :280.00  
                                       NA's   :3348    NA's   :2503    
    genus             species              taxa            plot_type        
 Length:34786       Length:34786       Length:34786       Length:34786      
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            </code></pre>
</div>
</div>
<p>Print top and bottom obervations</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  record_id month day year plot_id species_id sex hindfoot_length weight
1         1     7  16 1977       2         NL   M              32     NA
2        72     8  19 1977       2         NL   M              31     NA
3       224     9  13 1977       2         NL                  NA     NA
4       266    10  16 1977       2         NL                  NA     NA
5       349    11  12 1977       2         NL                  NA     NA
6       363    11  12 1977       2         NL                  NA     NA
    genus  species   taxa plot_type
1 Neotoma albigula Rodent   Control
2 Neotoma albigula Rodent   Control
3 Neotoma albigula Rodent   Control
4 Neotoma albigula Rodent   Control
5 Neotoma albigula Rodent   Control
6 Neotoma albigula Rodent   Control</code></pre>
</div>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      record_id month day year plot_id species_id sex hindfoot_length weight
34781     26787     9  27 1997       7         PL   F              21     16
34782     26966    10  25 1997       7         PL   M              20     16
34783     27185    11  22 1997       7         PL   F              21     22
34784     27792     5   2 1998       7         PL   F              20      8
34785     28806    11  21 1998       7         PX                  NA     NA
34786     30986     7   1 2000       7         PX                  NA     NA
            genus  species   taxa        plot_type
34781  Peromyscus leucopus Rodent Rodent Exclosure
34782  Peromyscus leucopus Rodent Rodent Exclosure
34783  Peromyscus leucopus Rodent Rodent Exclosure
34784  Peromyscus leucopus Rodent Rodent Exclosure
34785 Chaetodipus      sp. Rodent Rodent Exclosure
34786 Chaetodipus      sp. Rodent Rodent Exclosure</code></pre>
</div>
</div>
<p>Retrieve specific element/row/column</p>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span><span class="op">[</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">]</span> <span class="co"># element[1,1]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span><span class="op">[</span><span class="fl">1</span>, <span class="op">]</span> <span class="co"># row 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  record_id month day year plot_id species_id sex hindfoot_length weight
1         1     7  16 1977       2         NL   M              32     NA
    genus  species   taxa plot_type
1 Neotoma albigula Rodent   Control</code></pre>
</div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span><span class="op">)</span> <span class="co"># column 1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   1  72 224 266 349 363</code></pre>
</div>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span> <span class="co"># column by name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "M" "M" ""  ""  ""  "" </code></pre>
</div>
</div>
</section><section id="dealing-with-factor-categorical-columns" class="level3"><h3 class="anchored" data-anchor-id="dealing-with-factor-categorical-columns">Dealing with Factor (Categorical) Columns</h3>
<p>R convert columns that contain characters to factors by default. Factors are treated as integer vectors. By default, R sorts levels in alphabetical order.</p>
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Reorder factors (to get better plots)</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex</span>, level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 3 levels "F","M","": 2 2 3 3 3 3 3 3 2 3 ...</code></pre>
</div>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "F" "M" "" </code></pre>
</div>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nlevels.html">nlevels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section><section id="basic-plotting" class="level3"><h3 class="anchored" data-anchor-id="basic-plotting">Basic Plotting</h3>
<p>Histogram</p>
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># plot(surveys$sex)  # not possible</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Enhance the plot</p>
<div class="cell">
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Female"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Male"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">$</span><span class="va">sex_ordered</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="data-manipulation" class="level2"><h2 class="anchored" data-anchor-id="data-manipulation">Data Manipulation</h2>
<ul>
<li>
<code>tdlyr</code>
<ul>
<li>makes manipulation of data easier</li>
<li>built to work with data frames directly</li>
<li>can directly work with data stored in an external database which give the advantage of only bringing what we need to the memory to work on without having to bring the whole database</li>
</ul>
</li>
<li>
<code>tidyr</code>
<ul>
<li>allows to swiftly convert b/w different data formats for plotting &amp; analysis in order to accommodate the different requirements by different functions
<ul>
<li>sometime we want one row per measurement</li>
<li>other times we want the data aggregated like when plotting</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Before using <code>tdlyr</code> and <code>tidyr</code>:</p>
<ul>
<li>Install <code>tidyverse</code> package: umbrella-package that install several packages (tidyr, dplyr, ggplot2 tibble, magrittr, etc.)</li>
<li>Load the package each session</li>
</ul>
<p>Load packages</p>
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://tidyverse.tidyverse.org">"tidyverse"</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Load &amp; inspect data</p>
<div class="cell">
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># notice the '_' instead of '.' of basic R</span></span>
<span><span class="va">surveys</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="fu"><a href="https://here.r-lib.org/reference/here.html">here</a></span><span class="op">(</span><span class="st">"data"</span>, <span class="st">"portal_data_joined.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">surveys</span><span class="op">)</span> <span class="co"># structure: tbl_df (tibble)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [34,786 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ record_id      : num [1:34786] 1 72 224 266 349 363 435 506 588 661 ...
 $ month          : num [1:34786] 7 8 9 10 11 11 12 1 2 3 ...
 $ day            : num [1:34786] 16 19 13 16 12 12 10 8 18 11 ...
 $ year           : num [1:34786] 1977 1977 1977 1977 1977 ...
 $ plot_id        : num [1:34786] 2 2 2 2 2 2 2 2 2 2 ...
 $ species_id     : chr [1:34786] "NL" "NL" "NL" "NL" ...
 $ sex            : chr [1:34786] "M" "M" NA NA ...
 $ hindfoot_length: num [1:34786] 32 31 NA NA NA NA NA NA NA NA ...
 $ weight         : num [1:34786] NA NA NA NA NA NA NA NA 218 NA ...
 $ genus          : chr [1:34786] "Neotoma" "Neotoma" "Neotoma" "Neotoma" ...
 $ species        : chr [1:34786] "albigula" "albigula" "albigula" "albigula" ...
 $ taxa           : chr [1:34786] "Rodent" "Rodent" "Rodent" "Rodent" ...
 $ plot_type      : chr [1:34786] "Control" "Control" "Control" "Control" ...
 - attr(*, "spec")=
  .. cols(
  ..   record_id = col_double(),
  ..   month = col_double(),
  ..   day = col_double(),
  ..   year = col_double(),
  ..   plot_id = col_double(),
  ..   species_id = col_character(),
  ..   sex = col_character(),
  ..   hindfoot_length = col_double(),
  ..   weight = col_double(),
  ..   genus = col_character(),
  ..   species = col_character(),
  ..   taxa = col_character(),
  ..   plot_type = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># view(surveys) # preview in the viewer window, avoid when rendering</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="selection" class="level3"><h3 class="anchored" data-anchor-id="selection">Selection</h3>
<p>Select certain columns</p>
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">surveys</span>, <span class="va">plot_id</span>, <span class="va">species_id</span>, <span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,786 × 3
   plot_id species_id weight
     &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
 1       2 NL             NA
 2       2 NL             NA
 3       2 NL             NA
 4       2 NL             NA
 5       2 NL             NA
 6       2 NL             NA
 7       2 NL             NA
 8       2 NL             NA
 9       2 NL            218
10       2 NL             NA
# ℹ 34,776 more rows</code></pre>
</div>
</div>
<p>Select all columns except …</p>
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">surveys</span>, <span class="op">-</span><span class="va">sex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 34,786 × 12
   record_id month   day  year plot_id species_id hindfoot_length weight genus  
       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  
 1         1     7    16  1977       2 NL                      32     NA Neotoma
 2        72     8    19  1977       2 NL                      31     NA Neotoma
 3       224     9    13  1977       2 NL                      NA     NA Neotoma
 4       266    10    16  1977       2 NL                      NA     NA Neotoma
 5       349    11    12  1977       2 NL                      NA     NA Neotoma
 6       363    11    12  1977       2 NL                      NA     NA Neotoma
 7       435    12    10  1977       2 NL                      NA     NA Neotoma
 8       506     1     8  1978       2 NL                      NA     NA Neotoma
 9       588     2    18  1978       2 NL                      NA    218 Neotoma
10       661     3    11  1978       2 NL                      NA     NA Neotoma
# ℹ 34,776 more rows
# ℹ 3 more variables: species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
</div>
</div>
<p>Select rows based on criteria</p>
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">surveys</span>, <span class="va">year</span> <span class="op">==</span> <span class="fl">1995</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,180 × 13
   record_id month   day  year plot_id species_id sex   hindfoot_length weight
       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;dbl&gt;  &lt;dbl&gt;
 1     22314     6     7  1995       2 NL         M                  34     NA
 2     22728     9    23  1995       2 NL         F                  32    165
 3     22899    10    28  1995       2 NL         F                  32    171
 4     23032    12     2  1995       2 NL         F                  33     NA
 5     22003     1    11  1995       2 DM         M                  37     41
 6     22042     2     4  1995       2 DM         F                  36     45
 7     22044     2     4  1995       2 DM         M                  37     46
 8     22105     3     4  1995       2 DM         F                  37     49
 9     22109     3     4  1995       2 DM         M                  37     46
10     22168     4     1  1995       2 DM         M                  36     48
# ℹ 1,170 more rows
# ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
</div>
</div>
</section><section id="piping" class="level3"><h3 class="anchored" data-anchor-id="piping">Piping</h3>
<p>Sending the results of one function to another</p>
<div class="cell">
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># in multiple steps</span></span>
<span><span class="va">survey_less5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">surveys</span>, <span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">survey_sml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">survey_less5</span>, <span class="va">species_id</span>, <span class="va">sex</span>, <span class="va">weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># in one long step</span></span>
<span><span class="va">survey_sml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">surveys</span>, <span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span>, <span class="va">species_id</span>, <span class="va">sex</span>, <span class="va">weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># using pipe %&gt;% of magritter package.  Use Ctrl + Shift + M to add</span></span>
<span><span class="va">survey_sml</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">species_id</span>, <span class="va">sex</span>, <span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="summary" class="level3"><h3 class="anchored" data-anchor-id="summary">Summary</h3>
<p>Summary of groups (1+ columns)</p>
<p>one factor</p>
<div class="cell">
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  sex   mean_weight
  &lt;chr&gt;       &lt;dbl&gt;
1 F            42.2
2 M            43.0
3 &lt;NA&gt;         64.7</code></pre>
</div>
</div>
<p>two factors</p>
<div class="cell">
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">sex</span>, <span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 3
# Groups:   sex [3]
   sex   species     mean_weight
   &lt;chr&gt; &lt;chr&gt;             &lt;dbl&gt;
 1 F     albigula         154.  
 2 F     baileyi           30.2 
 3 F     eremicus          22.8 
 4 F     flavus             7.97
 5 F     fulvescens        13.7 
 6 F     fulviventer       69   
 7 F     hispidus          69.0 
 8 F     leucogaster       31.1 
 9 F     leucopus          19.3 
10 F     maniculatus       22.1 
# ℹ 71 more rows</code></pre>
</div>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 81 × 3
# Groups:   species [40]
   species         sex   mean_weight
   &lt;chr&gt;           &lt;chr&gt;       &lt;dbl&gt;
 1 albigula        F           154. 
 2 albigula        M           166. 
 3 albigula        &lt;NA&gt;        168. 
 4 audubonii       &lt;NA&gt;        NaN  
 5 baileyi         F            30.2
 6 baileyi         M            33.8
 7 baileyi         &lt;NA&gt;         30.6
 8 bilineata       &lt;NA&gt;        NaN  
 9 brunneicapillus &lt;NA&gt;        NaN  
10 chlorurus       &lt;NA&gt;        NaN  
# ℹ 71 more rows</code></pre>
</div>
</div>
<p>to avoid using <code>na.rm = FALSE</code> each statistics</p>
<div class="cell">
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 59 × 5
# Groups:   species [22]
   species  sex   mean_weight sd_weight sd_count
   &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;int&gt;
 1 albigula F          154.      39.2        652
 2 albigula M          166.      49.0        484
 3 albigula &lt;NA&gt;       168.      44.2         16
 4 baileyi  F           30.2      5.27      1617
 5 baileyi  M           33.8      8.27      1188
 6 baileyi  &lt;NA&gt;        30.6      9.96         5
 7 eremicus F           22.8      4.57       568
 8 eremicus M           20.6      3.49       689
 9 eremicus &lt;NA&gt;        17.7      0.577        3
10 flavus   F            7.97     1.69       742
# ℹ 49 more rows</code></pre>
</div>
</div>
<p>arrange by mean weight</p>
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">mean_weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 59 × 5
# Groups:   species [22]
   species   sex   mean_weight sd_weight sd_count
   &lt;chr&gt;     &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;int&gt;
 1 flavus    &lt;NA&gt;         6        1.63         4
 2 taylori   M            7.36     0.842       14
 3 flavus    M            7.89     1.59       802
 4 flavus    F            7.97     1.69       742
 5 taylori   F            9.16     2.24        31
 6 montanus  M            9.5      1.29         4
 7 megalotis M           10.1      1.73      1339
 8 montanus  F           11        2.16         4
 9 megalotis &lt;NA&gt;        11.1      2.57        12
10 megalotis F           11.1      2.56      1184
# ℹ 49 more rows</code></pre>
</div>
</div>
<p>in descending order</p>
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">mean_weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 59 × 5
# Groups:   species [22]
   species     sex   mean_weight sd_weight sd_count
   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;int&gt;
 1 albigula    &lt;NA&gt;        168.       44.2       16
 2 albigula    M           166.       49.0      484
 3 albigula    F           154.       39.2      652
 4 hispidus    &lt;NA&gt;        130        NA          1
 5 spilosoma   M           130        NA          1
 6 spectabilis M           122.       24.0     1220
 7 spectabilis &lt;NA&gt;        120        18.5       18
 8 spectabilis F           118.       21.5     1106
 9 fulviventer F            69        37.8       16
10 hispidus    F            69.0      29.7       98
# ℹ 49 more rows</code></pre>
</div>
</div>
<p>by count</p>
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">sex</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, sd_count <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">sd_count</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 59 × 5
# Groups:   species [22]
   species     sex   mean_weight sd_weight sd_count
   &lt;chr&gt;       &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;    &lt;int&gt;
 1 hispidus    &lt;NA&gt;        130      NA            1
 2 intermedius &lt;NA&gt;         18      NA            1
 3 leucopus    &lt;NA&gt;         25      NA            1
 4 spilosoma   F            57      NA            1
 5 spilosoma   M           130      NA            1
 6 fulviventer &lt;NA&gt;         40.5     6.36         2
 7 leucogaster &lt;NA&gt;         29      11.3          2
 8 eremicus    &lt;NA&gt;         17.7     0.577        3
 9 ordii       &lt;NA&gt;         50.7     6.51         3
10 sp.         F            20.7     1.15         3
# ℹ 49 more rows</code></pre>
</div>
</div>
</section><section id="count" class="level3"><h3 class="anchored" data-anchor-id="count">Count</h3>
<p>Count of a categorical column</p>
<div class="cell">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  sex       n
  &lt;chr&gt; &lt;int&gt;
1 F     15690
2 M     17348
3 &lt;NA&gt;   1748</code></pre>
</div>
</div>
</section><section id="reshaping" class="level3"><h3 class="anchored" data-anchor-id="reshaping">Reshaping</h3>
<p>Using gather &amp; spreed</p>
<p>prepare the needed data first</p>
<div class="cell">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_gw</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">genus</span>, <span class="va">plot_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarize</a></span><span class="op">(</span>mean_weight <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>creating a 2D table where each dimension represent a category the cell will represent a statistics</p>
<div class="cell">
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_spread</span> <span class="op">&lt;-</span> <span class="va">surveys_gw</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">genus</span>, value <span class="op">=</span> <span class="va">mean_weight</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">surveys_spread</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [24 × 11] (S3: tbl_df/tbl/data.frame)
 $ plot_id        : num [1:24] 1 2 3 4 5 6 7 8 9 10 ...
 $ Baiomys        : num [1:24] 7 6 8.61 NA 7.75 ...
 $ Chaetodipus    : num [1:24] 22.2 25.1 24.6 23 18 ...
 $ Dipodomys      : num [1:24] 60.2 55.7 52 57.5 51.1 ...
 $ Neotoma        : num [1:24] 156 169 158 164 190 ...
 $ Onychomys      : num [1:24] 27.7 26.9 26 28.1 27 ...
 $ Perognathus    : num [1:24] 9.62 6.95 7.51 7.82 8.66 ...
 $ Peromyscus     : num [1:24] 22.2 22.3 21.4 22.6 21.2 ...
 $ Reithrodontomys: num [1:24] 11.4 10.7 10.5 10.3 11.2 ...
 $ Sigmodon       : num [1:24] NA 70.9 65.6 82 82.7 ...
 $ Spermophilus   : num [1:24] NA NA NA NA NA NA NA NA NA NA ...</code></pre>
</div>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">surveys_spread</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  plot_id Baiomys Chaetodipus Dipodomys Neotoma Onychomys Perognathus Peromyscus
    &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;      &lt;dbl&gt;
1       1    7           22.2      60.2    156.      27.7        9.62       22.2
2       2    6           25.1      55.7    169.      26.9        6.95       22.3
3       3    8.61        24.6      52.0    158.      26.0        7.51       21.4
4       4   NA           23.0      57.5    164.      28.1        7.82       22.6
5       5    7.75        18.0      51.1    190.      27.0        8.66       21.2
6       6   NA           24.9      58.6    180.      25.9        7.81       21.8
# ℹ 3 more variables: Reithrodontomys &lt;dbl&gt;, Sigmodon &lt;dbl&gt;, Spermophilus &lt;dbl&gt;</code></pre>
</div>
</div>
<p>bring spread back</p>
<div class="cell">
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_gw</span> <span class="op">&lt;-</span> <span class="va">surveys_spread</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span>key <span class="op">=</span> <span class="va">genus</span>, value <span class="op">=</span> <span class="va">mean_weight</span>, <span class="op">-</span><span class="va">plot_id</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">surveys_gw</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [240 × 3] (S3: tbl_df/tbl/data.frame)
 $ plot_id    : num [1:240] 1 2 3 4 5 6 7 8 9 10 ...
 $ genus      : chr [1:240] "Baiomys" "Baiomys" "Baiomys" "Baiomys" ...
 $ mean_weight: num [1:240] 7 6 8.61 NA 7.75 ...</code></pre>
</div>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">surveys_gw</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  plot_id genus   mean_weight
    &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;
1       1 Baiomys        7   
2       2 Baiomys        6   
3       3 Baiomys        8.61
4       4 Baiomys       NA   
5       5 Baiomys        7.75
6       6 Baiomys       NA   </code></pre>
</div>
</div>
</section><section id="filtering" class="level3"><h3 class="anchored" data-anchor-id="filtering">Filtering</h3>
<p>Remove missing data</p>
<div class="cell">
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">survey_complete</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">hindfoot_length</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Filter those that has sample greater than 50</p>
<div class="cell">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">species_counts</span> <span class="op">&lt;-</span> <span class="va">survey_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">species_id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">n</span> <span class="op">&gt;=</span> <span class="fl">50</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>filter only those in the indicated category</p>
<div class="cell">
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_com</span> <span class="op">&lt;-</span> <span class="va">surveys</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">species_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"albigula"</span>, <span class="st">"eremicus"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section><section id="saving-to-disk" class="level3"><h3 class="anchored" data-anchor-id="saving-to-disk">Saving to disk</h3>
<div class="cell">
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">write_cvs</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="visualization" class="level2"><h2 class="anchored" data-anchor-id="visualization">Visualization</h2>
<ul>
<li>Help in making complex plots from data frames in simple steps</li>
<li>ggplot graphics are built step by step by adding new elements; this makes it flexible as well as customization</li>
<li>To get list of ggplot2 geometric objects: <code>help.search("gemo_", package="ggplot2")</code>
</li>
<li>To know the aesthetic specification each geom_ can take: <code><a href="https://ggplot2.tidyverse.org/articles/ggplot2-specs.html">vignette("ggplot2-specs")</a></code>
</li>
</ul>
<p>Step 1: Bind the plot to specific data frame</p>
<div class="cell">
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">survey_complete</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">hindfoot_length</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">surveys_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Color for each group</span></span>
<span><span class="va">surveys_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">survey_complete</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">weight</span>, y <span class="op">=</span> <span class="va">hindfoot_length</span><span class="op">)</span>,</span>
<span>  color <span class="op">=</span> <span class="va">species_id</span></span>
<span><span class="op">)</span></span>
<span><span class="va">surveys_plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Step 2: Select the type of the plot</p>
<ul>
<li>scatter plot, dot plots, etc. &gt; geom_point()</li>
<li>boxplots &gt; geom_boxplot()</li>
<li>trend lines, time series, etc. &gt; geom_line()</li>
</ul>
<section id="scatter-plot" class="level3"><h3 class="anchored" data-anchor-id="scatter-plot">Scatter plot</h3>
<div class="cell">
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># add transparency</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-39-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># color if not used in binding</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, color <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-39-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># add color if not used in binding</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">species_id</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-39-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make the color blend by introducing small random variation in points locations</span></span>
<span><span class="co"># used when having small data sets</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-39-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="boxplot" class="level3"><h3 class="anchored" data-anchor-id="boxplot">Boxplot</h3>
<div class="cell">
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">surveys_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">survey_complete</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">species_id</span>, y <span class="op">=</span> <span class="va">weight</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># show data</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-40-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># bring boxplot layer in front</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.1</span>, color <span class="op">=</span> <span class="st">"tomato"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-40-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="time-series-data" class="level3"><h3 class="anchored" data-anchor-id="time-series-data">Time series data</h3>
<div class="cell">
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># create appropriate dataset</span></span>
<span><span class="va">yearly_count</span> <span class="op">&lt;-</span> <span class="va">survey_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">species_id</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">yearly_count</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make it more meaningful by breaking it by category</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="va">species_id</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># make it more colorful</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">species_id</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># split into multiple plots</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">species_id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># split the line in each plot by sex</span></span>
<span><span class="va">yearly_sex_counts</span> <span class="op">&lt;-</span> <span class="va">survey_complete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">species_id</span>, <span class="va">sex</span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">yearly_sex_counts</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">year</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">species_id</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># remove background</span></span>
<span><span class="va">surveys_plot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">sex</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">species_id</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-41-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="colors" class="level2"><h2 class="anchored" data-anchor-id="colors">Colors</h2>
<section id="cols4all-package" class="level3"><h3 class="anchored" data-anchor-id="cols4all-package">cols4all package</h3>
<p><a href="https://cols4all.github.io/cols4all-R/">cols4all package</a> by <a href="https://10mapz.com/">Martijn Tennekes</a> helps select color palettes.</p>
<p>The main tool in the package is a dashboard that can be started using the following line:</p>
<div class="cell">
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">c4a_gui</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="spatial-data" class="level2"><h2 class="anchored" data-anchor-id="spatial-data">Spatial Data</h2>
<section id="projections" class="level3"><h3 class="anchored" data-anchor-id="projections">Projections</h3>
<p>An overview of common projections for Earth is provided by <a href="https://pubs.usgs.gov/gip/70047422/report.pdf">USGS (pdf)</a></p>
<div class="cell">
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># download world map in small resolution as an sf object</span></span>
<span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu">ne_countries</span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"small"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 168 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -18.28799 xmax: 180 ymax: 83.23324
Geodetic CRS:  WGS 84
       featurecla scalerank labelrank                  sovereignt sov_a3
1 Admin-0 country         1         6                        Fiji    FJI
2 Admin-0 country         1         3 United Republic of Tanzania    TZA
3 Admin-0 country         1         7              Western Sahara    SAH
4 Admin-0 country         1         2                      Canada    CAN
5 Admin-0 country         1         2    United States of America    US1
6 Admin-0 country         1         3                  Kazakhstan    KA1
  adm0_dif level              type tlc                       admin adm0_a3
1        0     2 Sovereign country   1                        Fiji     FJI
2        0     2 Sovereign country   1 United Republic of Tanzania     TZA
3        0     2     Indeterminate   1              Western Sahara     SAH
4        0     2 Sovereign country   1                      Canada     CAN
5        1     2           Country   1    United States of America     USA
6        1     1       Sovereignty   1                  Kazakhstan     KAZ
  geou_dif                  geounit gu_a3 su_dif        subunit su_a3 brk_diff
1        0                     Fiji   FJI      0           Fiji   FJI        0
2        0                 Tanzania   TZA      0       Tanzania   TZA        0
3        0           Western Sahara   SAH      0 Western Sahara   SAH        1
4        0                   Canada   CAN      0         Canada   CAN        0
5        0 United States of America   USA      0  United States   USA        0
6        0               Kazakhstan   KAZ      0     Kazakhstan   KAZ        0
                      name      name_long brk_a3      brk_name brk_group
1                     Fiji           Fiji    FJI          Fiji      &lt;NA&gt;
2                 Tanzania       Tanzania    TZA      Tanzania      &lt;NA&gt;
3                W. Sahara Western Sahara    B28     W. Sahara      &lt;NA&gt;
4                   Canada         Canada    CAN        Canada      &lt;NA&gt;
5 United States of America  United States    USA United States      &lt;NA&gt;
6               Kazakhstan     Kazakhstan    KAZ    Kazakhstan      &lt;NA&gt;
   abbrev postal                        formal_en formal_fr     name_ciawf
1    Fiji     FJ                 Republic of Fiji      &lt;NA&gt;           Fiji
2   Tanz.     TZ      United Republic of Tanzania      &lt;NA&gt;       Tanzania
3 W. Sah.     WS Sahrawi Arab Democratic Republic      &lt;NA&gt; Western Sahara
4    Can.     CA                           Canada      &lt;NA&gt;         Canada
5  U.S.A.     US         United States of America      &lt;NA&gt;  United States
6    Kaz.     KZ           Republic of Kazakhstan      &lt;NA&gt;     Kazakhstan
  note_adm0                        note_brk                name_sort name_alt
1      &lt;NA&gt;                            &lt;NA&gt;                     Fiji     &lt;NA&gt;
2      &lt;NA&gt;                            &lt;NA&gt;                 Tanzania     &lt;NA&gt;
3      &lt;NA&gt; Self admin.; Claimed by Morocco           Western Sahara     &lt;NA&gt;
4      &lt;NA&gt;                            &lt;NA&gt;                   Canada     &lt;NA&gt;
5      &lt;NA&gt;                            &lt;NA&gt; United States of America     &lt;NA&gt;
6      &lt;NA&gt;                            &lt;NA&gt;               Kazakhstan     &lt;NA&gt;
  mapcolor7 mapcolor8 mapcolor9 mapcolor13   pop_est pop_rank pop_year   gdp_md
1         5         1         2          2    889953       11     2019     5496
2         3         6         2          2  58005463       16     2019    63177
3         4         7         4          4    603253       11     2017      907
4         6         6         2          2  37589262       15     2019  1736425
5         4         5         1          1 328239523       17     2019 21433226
6         6         1         6          1  18513930       14     2019   181665
  gdp_year                   economy             income_grp fips_10 iso_a2
1     2019      6. Developing region 4. Lower middle income      FJ     FJ
2     2019 7. Least developed region          5. Low income      TZ     TZ
3     2007 7. Least developed region          5. Low income      WI     EH
4     2019   1. Developed region: G7   1. High income: OECD      CA     CA
5     2019   1. Developed region: G7   1. High income: OECD      US     US
6     2019      6. Developing region 3. Upper middle income      KZ     KZ
  iso_a2_eh iso_a3 iso_a3_eh iso_n3 iso_n3_eh un_a3 wb_a2 wb_a3   woe_id
1        FJ    FJI       FJI    242       242   242    FJ   FJI 23424813
2        TZ    TZA       TZA    834       834   834    TZ   TZA 23424973
3        EH    ESH       ESH    732       732   732   -99   -99 23424990
4        CA    CAN       CAN    124       124   124    CA   CAN 23424775
5        US    USA       USA    840       840   840    US   USA 23424977
6        KZ    KAZ       KAZ    398       398   398    KZ   KAZ      -90
  woe_id_eh                                                    woe_note
1  23424813                                  Exact WOE match as country
2  23424973                                  Exact WOE match as country
3  23424990                                  Exact WOE match as country
4  23424775                                  Exact WOE match as country
5  23424977                                  Exact WOE match as country
6  23424871 Includes Baykonur Cosmodrome as an Admin-1 states provinces
  adm0_iso adm0_diff adm0_tlc adm0_a3_us adm0_a3_fr adm0_a3_ru adm0_a3_es
1      FJI      &lt;NA&gt;      FJI        FJI        FJI        FJI        FJI
2      TZA      &lt;NA&gt;      TZA        TZA        TZA        TZA        TZA
3      B28      &lt;NA&gt;      B28        SAH        MAR        SAH        SAH
4      CAN      &lt;NA&gt;      CAN        CAN        CAN        CAN        CAN
5      USA      &lt;NA&gt;      USA        USA        USA        USA        USA
6      KAZ      &lt;NA&gt;      KAZ        KAZ        KAZ        KAZ        KAZ
  adm0_a3_cn adm0_a3_tw adm0_a3_in adm0_a3_np adm0_a3_pk adm0_a3_de adm0_a3_gb
1        FJI        FJI        FJI        FJI        FJI        FJI        FJI
2        TZA        TZA        TZA        TZA        TZA        TZA        TZA
3        SAH        SAH        MAR        SAH        SAH        SAH        SAH
4        CAN        CAN        CAN        CAN        CAN        CAN        CAN
5        USA        USA        USA        USA        USA        USA        USA
6        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ
  adm0_a3_br adm0_a3_il adm0_a3_ps adm0_a3_sa adm0_a3_eg adm0_a3_ma adm0_a3_pt
1        FJI        FJI        FJI        FJI        FJI        FJI        FJI
2        TZA        TZA        TZA        TZA        TZA        TZA        TZA
3        SAH        SAH        MAR        MAR        SAH        MAR        SAH
4        CAN        CAN        CAN        CAN        CAN        CAN        CAN
5        USA        USA        USA        USA        USA        USA        USA
6        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ
  adm0_a3_ar adm0_a3_jp adm0_a3_ko adm0_a3_vn adm0_a3_tr adm0_a3_id adm0_a3_pl
1        FJI        FJI        FJI        FJI        FJI        FJI        FJI
2        TZA        TZA        TZA        TZA        TZA        TZA        TZA
3        SAH        SAH        SAH        SAH        MAR        MAR        MAR
4        CAN        CAN        CAN        CAN        CAN        CAN        CAN
5        USA        USA        USA        USA        USA        USA        USA
6        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ
  adm0_a3_gr adm0_a3_it adm0_a3_nl adm0_a3_se adm0_a3_bd adm0_a3_ua adm0_a3_un
1        FJI        FJI        FJI        FJI        FJI        FJI        -99
2        TZA        TZA        TZA        TZA        TZA        TZA        -99
3        SAH        SAH        MAR        SAH        SAH        SAH        -99
4        CAN        CAN        CAN        CAN        CAN        CAN        -99
5        USA        USA        USA        USA        USA        USA        -99
6        KAZ        KAZ        KAZ        KAZ        KAZ        KAZ        -99
  adm0_a3_wb     continent region_un        subregion
1        -99       Oceania   Oceania        Melanesia
2        -99        Africa    Africa   Eastern Africa
3        -99        Africa    Africa  Northern Africa
4        -99 North America  Americas Northern America
5        -99 North America  Americas Northern America
6        -99          Asia      Asia     Central Asia
                   region_wb name_len long_len abbrev_len tiny homepart
1        East Asia &amp; Pacific        4        4          4  -99        1
2         Sub-Saharan Africa        8        8          5  -99        1
3 Middle East &amp; North Africa        9       14          7  -99        1
4              North America        6        6          4  -99        1
5              North America       24       13          6  -99        1
6      Europe &amp; Central Asia       10       10          4  -99        1
  min_zoom min_label max_label    label_x    label_y      ne_id wikidataid
1      0.0       3.0       8.0  177.97543 -17.826099 1159320625       Q712
2      0.0       3.0       8.0   34.95918  -6.051866 1159321337       Q924
3      4.7       6.0      11.0  -12.63030  23.967592 1159321223      Q6250
4      0.0       1.7       5.7 -101.91070  60.324287 1159320467        Q16
5      0.0       1.7       5.7  -97.48260  39.538479 1159321369        Q30
6      0.0       2.7       7.0   68.68555  49.054149 1159320967       Q232
           name_ar         name_bn            name_de                  name_en
1             فيجي            ফিজি            Fidschi                     Fiji
2          تنزانيا       তানজানিয়া           Tansania                 Tanzania
3  الصحراء الغربية    পশ্চিম সাহারা         Westsahara           Western Sahara
4             كندا          কানাডা             Kanada                   Canada
5 الولايات المتحدة মার্কিন যুক্তরাষ্ট্র Vereinigte Staaten United States of America
6        كازاخستان       কাজাখস্তান         Kasachstan               Kazakhstan
            name_es             name_fa           name_fr
1              Fiyi                فیجی             Fidji
2          Tanzania            تانزانیا          Tanzanie
3 Sahara Occidental          صحرای غربی Sahara occidental
4            Canadá              کانادا            Canada
5    Estados Unidos ایالات متحده آمریکا        États-Unis
6        Kazajistán            قزاقستان        Kazakhstan
                      name_el      name_he          name_hi
1                       Φίτζι        פיג'י             फ़िजी
2                    Τανζανία       טנזניה          तंज़ानिया
3               Δυτική Σαχάρα סהרה המערבית     पश्चिमी सहारा
4                     Καναδάς         קנדה            कनाडा
5 Ηνωμένες Πολιτείες Αμερικής  ארצות הברית संयुक्त राज्य अमेरिका
6                   Καζακστάν       קזחסטן        कज़ाख़िस्तान
                    name_hu         name_id               name_it
1           Fidzsi-szigetek            Fiji                  Figi
2                  Tanzánia        Tanzania              Tanzania
3            Nyugat-Szahara    Sahara Barat    Sahara Occidentale
4                    Kanada          Kanada                Canada
5 Amerikai Egyesült Államok Amerika Serikat Stati Uniti d'America
6                Kazahsztán      Kazakhstan            Kazakistan
         name_ja    name_ko                      name_nl           name_pl
1       フィジー       피지                         Fiji             Fidżi
2     タンザニア   탄자니아                     Tanzania          Tanzania
3       西サハラ   서사하라            Westelijke Sahara  Sahara Zachodnia
4         カナダ     캐나다                       Canada            Kanada
5 アメリカ合衆国       미국 Verenigde Staten van Amerika Stany Zjednoczone
6   カザフスタン 카자흐스탄                   Kazachstan        Kazachstan
         name_pt         name_ru    name_sv                     name_tr
1           Fiji           Фиджи       Fiji                        Fiji
2       Tanzânia        Танзания   Tanzania                    Tanzanya
3 Sara Ocidental Западная Сахара Västsahara                  Batı Sahra
4         Canadá          Канада     Kanada                      Kanada
5 Estados Unidos             США        USA Amerika Birleşik Devletleri
6    Cazaquistão       Казахстан  Kazakstan                  Kazakistan
                  name_uk                name_ur    name_vi    name_zh name_zht
1                   Фіджі                    فجی       Fiji       斐济     斐濟
2                Танзанія                تنزانیہ   Tanzania   坦桑尼亚 坦尚尼亞
3          Західна Сахара            مغربی صحارا Tây Sahara   西撒哈拉 西撒哈拉
4                  Канада                 کینیڈا     Canada     加拿大   加拿大
5 Сполучені Штати Америки ریاستہائے متحدہ امریکا     Hoa Kỳ       美国     美國
6               Казахстан               قازقستان Kazakhstan 哈萨克斯坦   哈薩克
          fclass_iso tlc_diff         fclass_tlc fclass_us    fclass_fr
1    Admin-0 country     &lt;NA&gt;    Admin-0 country      &lt;NA&gt;         &lt;NA&gt;
2    Admin-0 country     &lt;NA&gt;    Admin-0 country      &lt;NA&gt;         &lt;NA&gt;
3 Admin-0 dependency     &lt;NA&gt; Admin-0 dependency      &lt;NA&gt; Unrecognized
4    Admin-0 country     &lt;NA&gt;    Admin-0 country      &lt;NA&gt;         &lt;NA&gt;
5    Admin-0 country     &lt;NA&gt;    Admin-0 country      &lt;NA&gt;         &lt;NA&gt;
6    Admin-0 country     &lt;NA&gt;    Admin-0 country      &lt;NA&gt;         &lt;NA&gt;
  fclass_ru fclass_es fclass_cn fclass_tw    fclass_in fclass_np fclass_pk
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; Unrecognized      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;
  fclass_de fclass_gb fclass_br fclass_il    fclass_ps    fclass_sa fclass_eg
1      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; Unrecognized Unrecognized      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
6      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
     fclass_ma fclass_pt fclass_ar fclass_jp fclass_ko fclass_vn    fclass_tr
1         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;
2         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;
3 Unrecognized      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt; Unrecognized
4         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;
5         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;
6         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;
     fclass_id    fclass_pl fclass_gr fclass_it    fclass_nl fclass_se
1         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
2         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
3 Unrecognized Unrecognized      &lt;NA&gt;      &lt;NA&gt; Unrecognized      &lt;NA&gt;
4         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
5         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
6         &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;         &lt;NA&gt;      &lt;NA&gt;
  fclass_bd fclass_ua                       geometry
1      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((180 -16.067...
2      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((33.90371 -0...
3      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-8.66559 27...
4      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-122.84 49,...
5      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((-122.84 49,...
6      &lt;NA&gt;      &lt;NA&gt; MULTIPOLYGON (((87.35997 49...</code></pre>
</div>
</div>
<section id="mercator-projection-default" class="level4"><h4 class="anchored" data-anchor-id="mercator-projection-default">Mercator Projection, Default</h4>
<div class="cell">
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="lambert-azimuthal-equal-area-projection" class="level4"><h4 class="anchored" data-anchor-id="lambert-azimuthal-equal-area-projection">Lambert Azimuthal Equal-Area Projection</h4>
<div class="cell">
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"+proj=laea"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="foucaut-projection" class="level4"><h4 class="anchored" data-anchor-id="foucaut-projection">Foucaut Projection</h4>
<div class="cell">
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"+proj=fouc"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="natural-earch-ii-projection" class="level4"><h4 class="anchored" data-anchor-id="natural-earch-ii-projection">Natural Earch II Projection</h4>
<div class="cell">
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"+proj=natearth2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="epsg-codes" class="level4"><h4 class="anchored" data-anchor-id="epsg-codes">EPSG Codes</h4>
<p>If the projection has an <a href="https://epsg.io/?q=%20kind%3ACRS">EPSG code (html)</a>, it can be used instead as follows:</p>
<div class="cell">
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">world</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html">st_crs</a></span><span class="op">(</span><span class="fl">27700</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="r_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section></section><section id="references" class="level2"><h2 class="anchored" data-anchor-id="references">References</h2>
<ul>
<li>OU Software Carpentry Workshop (check other workshops <a href="https://libraries.ou.edu/content/software-and-data-carpentry">here</a>)
<ul>
<li><a href="https://oulib-swc.github.io/2019-05-15-ou-swc/">Main Tutorial</a></li>
<li><a href="https://datacarpentry.org/R-ecology-lesson/index.html">Data Carpentry with R</a></li>
<li><a href="https://swcarpentry.github.io/r-novice-gapminder/">Software Carpentry with R</a></li>
<li><a href="https://pad.carpentries.org/2019-05-15-ou-swc">Etherpad</a></li>
<li><a href="https://docs.google.com/document/d/1aJq_X1uhaNkUj7qdZEzOcpc2Pky7eZPy76yqs0UkfrQ/edit">Google Doc</a></li>
</ul>
</li>
<li>
<a href="https://rawcdn.githack.com/allisonhorst/data-vis/fc107e063f50ef8695b0a75ed73d74720aca2c65/data_vis_np.html">Intro to ggplot</a> by <a href="https://github.com/allisonhorst">Allison Horst</a>
</li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science book by Garrett Grolemund and Hadley Wickham</a></li>
<li><a href="http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1001745">Best Practices for Scientific Computing paper</a></li>
<li><a href="https://rstudio.github.io/r-manuals/">R Manuals</a></li>
</ul>


<!-- -->

</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><nav class="page-navigation column-body"><div class="nav-page nav-page-previous">
      <a href="../../src/notes/code-files.html" class="pagination-link" aria-label="Code Files">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Code Files</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../src/notes/quarto.html" class="pagination-link" aria-label="Quarto">
        <span class="nav-page-text"><span class="chapter-title">Quarto</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb129" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "R"</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="an">eval:</span><span class="co"> true</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Clean workspace}</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r List all used packages}</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a>packages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"downlit"</span>, </span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a>              <span class="st">"xml2"</span>, </span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a>              <span class="st">"here"</span>, </span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a>              <span class="st">"tidyverse"</span>, </span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a>              <span class="st">"janitor"</span>, </span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a>              <span class="st">"cols4all"</span>, </span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a>              <span class="st">"shiny"</span>, </span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a>              <span class="st">"shinyjs"</span>, </span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a>              <span class="st">"kableExtra"</span>, </span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a>              <span class="st">"colorblindcheck"</span>, </span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a>              <span class="st">"plotly"</span>,</span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a>              <span class="st">"sf"</span>,</span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a>              <span class="st">"rnaturalearth"</span>,</span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a>              <span class="st">"rnaturalearthdata"</span>)</span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Install missing packages}</span></span>
<span id="cb129-34"><a href="#cb129-34" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb129-35"><a href="#cb129-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">setdiff</span>(packages, <span class="fu">rownames</span>(<span class="fu">installed.packages</span>())))</span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Load packages}</span></span>
<span id="cb129-40"><a href="#cb129-40" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb129-41"><a href="#cb129-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-42"><a href="#cb129-42" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(packages, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-43"><a href="#cb129-43" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-44"><a href="#cb129-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-45"><a href="#cb129-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## R Packages</span></span>
<span id="cb129-46"><a href="#cb129-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-47"><a href="#cb129-47" aria-hidden="true" tabindex="-1"></a>An R package usually includes:</span>
<span id="cb129-48"><a href="#cb129-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-49"><a href="#cb129-49" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>reusable functions</span>
<span id="cb129-50"><a href="#cb129-50" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>documentation describing how to use the function</span>
<span id="cb129-51"><a href="#cb129-51" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>sample data</span>
<span id="cb129-52"><a href="#cb129-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-53"><a href="#cb129-53" aria-hidden="true" tabindex="-1"></a><span class="fu">## Dataset in Packages</span></span>
<span id="cb129-54"><a href="#cb129-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-55"><a href="#cb129-55" aria-hidden="true" tabindex="-1"></a>To list datasets in all the available packages, use the following command:</span>
<span id="cb129-56"><a href="#cb129-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-57"><a href="#cb129-57" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-58"><a href="#cb129-58" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="fu">.packages</span>(<span class="at">all.available =</span> <span class="cn">TRUE</span>))</span>
<span id="cb129-59"><a href="#cb129-59" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-60"><a href="#cb129-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-61"><a href="#cb129-61" aria-hidden="true" tabindex="-1"></a><span class="fu">## Primitive Data Types</span></span>
<span id="cb129-62"><a href="#cb129-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-63"><a href="#cb129-63" aria-hidden="true" tabindex="-1"></a>The primitive (also known as singleton/simple) data types in R are:</span>
<span id="cb129-64"><a href="#cb129-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-65"><a href="#cb129-65" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>character</span>
<span id="cb129-66"><a href="#cb129-66" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>numeric</span>
<span id="cb129-67"><a href="#cb129-67" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>logical</span>
<span id="cb129-68"><a href="#cb129-68" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>raw</span>
<span id="cb129-69"><a href="#cb129-69" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>imaginary numbers</span>
<span id="cb129-70"><a href="#cb129-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-71"><a href="#cb129-71" aria-hidden="true" tabindex="-1"></a>To know the datatype of an object, run the command:</span>
<span id="cb129-72"><a href="#cb129-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-73"><a href="#cb129-73" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-74"><a href="#cb129-74" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># give the data type of x</span></span>
<span id="cb129-75"><a href="#cb129-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-76"><a href="#cb129-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-77"><a href="#cb129-77" aria-hidden="true" tabindex="-1"></a>To know the type of the variables of each variable.</span>
<span id="cb129-78"><a href="#cb129-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-79"><a href="#cb129-79" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-80"><a href="#cb129-80" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> </span>
<span id="cb129-81"><a href="#cb129-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb129-82"><a href="#cb129-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb129-83"><a href="#cb129-83" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-84"><a href="#cb129-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-85"><a href="#cb129-85" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mixing Data Types</span></span>
<span id="cb129-86"><a href="#cb129-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-87"><a href="#cb129-87" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>character + numeric --<span class="sc">\&gt;</span> character</span>
<span id="cb129-88"><a href="#cb129-88" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>numeric + logical --<span class="sc">\&gt;</span> numeric</span>
<span id="cb129-89"><a href="#cb129-89" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>numeric + character + logical --<span class="sc">\&gt;</span> character</span>
<span id="cb129-90"><a href="#cb129-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-91"><a href="#cb129-91" aria-hidden="true" tabindex="-1"></a><span class="fu">## Compound Data Types</span></span>
<span id="cb129-92"><a href="#cb129-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-93"><a href="#cb129-93" aria-hidden="true" tabindex="-1"></a>The compound (also know as collection/sttructure) data types in R are:</span>
<span id="cb129-94"><a href="#cb129-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-95"><a href="#cb129-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**vector**: hold single type of data</span>
<span id="cb129-96"><a href="#cb129-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-97"><a href="#cb129-97" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb129-98"><a href="#cb129-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-99"><a href="#cb129-99" aria-hidden="true" tabindex="-1"></a><span class="fu">### Creating Vector</span></span>
<span id="cb129-100"><a href="#cb129-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-101"><a href="#cb129-101" aria-hidden="true" tabindex="-1"></a>The <span class="in">`c()`</span> function (**c**ombine multiple elements) can be used to create vectors in R.</span>
<span id="cb129-102"><a href="#cb129-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-103"><a href="#cb129-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-104"><a href="#cb129-104" aria-hidden="true" tabindex="-1"></a><span class="in">x &lt;- c(1, 2, 3, 4)</span></span>
<span id="cb129-105"><a href="#cb129-105" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-106"><a href="#cb129-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-107"><a href="#cb129-107" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-108"><a href="#cb129-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-109"><a href="#cb129-109" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**matrix**: 2D vector</span>
<span id="cb129-110"><a href="#cb129-110" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**array**: nD vector</span>
<span id="cb129-111"><a href="#cb129-111" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**list**: generic vector, can hold mixed type of data, eg, one element can be a character, another can be a list of integers, and the third could be a logical</span>
<span id="cb129-112"><a href="#cb129-112" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**data frame**: table where columns represent vectors</span>
<span id="cb129-113"><a href="#cb129-113" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**tibbles**: data frames, but slightly tweaked to work better with <span class="in">`tidyverse`</span>--when printing tibbles, only the first few columns that fit into the screen will be shown</span>
<span id="cb129-114"><a href="#cb129-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-115"><a href="#cb129-115" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb129-116"><a href="#cb129-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-117"><a href="#cb129-117" aria-hidden="true" tabindex="-1"></a><span class="fu">### Printing tibble All Columns</span></span>
<span id="cb129-118"><a href="#cb129-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-119"><a href="#cb129-119" aria-hidden="true" tabindex="-1"></a>To force the <span class="in">`print()`</span> function to print all the columns of a <span class="in">`tibble`</span>, set the <span class="in">`width`</span> parameter to <span class="in">`Inf`</span> as follows:</span>
<span id="cb129-120"><a href="#cb129-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-121"><a href="#cb129-121" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-122"><a href="#cb129-122" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(ds, <span class="at">width =</span> <span class="cn">Inf</span>)</span>
<span id="cb129-123"><a href="#cb129-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-124"><a href="#cb129-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-125"><a href="#cb129-125" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-126"><a href="#cb129-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-127"><a href="#cb129-127" aria-hidden="true" tabindex="-1"></a>To construct small tibble by hand, use the <span class="in">`tribble`</span> function as follows:</span>
<span id="cb129-128"><a href="#cb129-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-129"><a href="#cb129-129" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-130"><a href="#cb129-130" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb129-131"><a href="#cb129-131" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>var1, <span class="sc">~</span>var2, <span class="sc">~</span>var3</span>
<span id="cb129-132"><a href="#cb129-132" aria-hidden="true" tabindex="-1"></a>  <span class="st">"A"</span>, <span class="dv">1</span>, <span class="cn">TRUE</span>,</span>
<span id="cb129-133"><a href="#cb129-133" aria-hidden="true" tabindex="-1"></a>  <span class="st">"B"</span>, <span class="dv">2</span>, <span class="cn">FALSE</span>,</span>
<span id="cb129-134"><a href="#cb129-134" aria-hidden="true" tabindex="-1"></a>  <span class="st">"C"</span>, <span class="dv">3</span>, <span class="cn">TRUE</span></span>
<span id="cb129-135"><a href="#cb129-135" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-136"><a href="#cb129-136" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-137"><a href="#cb129-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-138"><a href="#cb129-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-139"><a href="#cb129-139" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**factor**</span>
<span id="cb129-140"><a href="#cb129-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-143"><a href="#cb129-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-144"><a href="#cb129-144" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-datastructure</span></span>
<span id="cb129-145"><a href="#cb129-145" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb129-146"><a href="#cb129-146" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: Common data structures in R ( taken from [Grolemund, 2014](https://jjallaire.github.io/hopr/objects.html))</span></span>
<span id="cb129-147"><a href="#cb129-147" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: NULL</span></span>
<span id="cb129-148"><a href="#cb129-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-149"><a href="#cb129-149" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">here</span>(<span class="st">"images"</span>, <span class="st">"datastructure.png"</span>))</span>
<span id="cb129-150"><a href="#cb129-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-151"><a href="#cb129-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-152"><a href="#cb129-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-153"><a href="#cb129-153" aria-hidden="true" tabindex="-1"></a>To know the data structure and length of the object, run the command:</span>
<span id="cb129-154"><a href="#cb129-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-155"><a href="#cb129-155" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-156"><a href="#cb129-156" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x) <span class="co"># give the structure type of x</span></span>
<span id="cb129-157"><a href="#cb129-157" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x) <span class="co"># length of structure</span></span>
<span id="cb129-158"><a href="#cb129-158" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-159"><a href="#cb129-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-160"><a href="#cb129-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-161"><a href="#cb129-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-162"><a href="#cb129-162" aria-hidden="true" tabindex="-1"></a><span class="fu">## Basics Operations</span></span>
<span id="cb129-163"><a href="#cb129-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-164"><a href="#cb129-164" aria-hidden="true" tabindex="-1"></a>Assignment</span>
<span id="cb129-165"><a href="#cb129-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-168"><a href="#cb129-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-169"><a href="#cb129-169" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co"># assign 3 to x (x gets 3)</span></span>
<span id="cb129-170"><a href="#cb129-170" aria-hidden="true" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="dv">3</span>) <span class="co"># assign 3 to x (x gets 3) &amp; print the result to console</span></span>
<span id="cb129-171"><a href="#cb129-171" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-172"><a href="#cb129-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-173"><a href="#cb129-173" aria-hidden="true" tabindex="-1"></a>Getting Help </span>
<span id="cb129-174"><a href="#cb129-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-175"><a href="#cb129-175" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-176"><a href="#cb129-176" aria-hidden="true" tabindex="-1"></a><span class="fu">args</span>(round) <span class="co"># print the argument list of function</span></span>
<span id="cb129-177"><a href="#cb129-177" aria-hidden="true" tabindex="-1"></a>?round <span class="co"># show documentation of function in Help window</span></span>
<span id="cb129-178"><a href="#cb129-178" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-179"><a href="#cb129-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-180"><a href="#cb129-180" aria-hidden="true" tabindex="-1"></a>Dealing with Structure</span>
<span id="cb129-181"><a href="#cb129-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-184"><a href="#cb129-184" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-185"><a href="#cb129-185" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenate set of values to create vector</span></span>
<span id="cb129-186"><a href="#cb129-186" aria-hidden="true" tabindex="-1"></a>weight_g <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb129-187"><a href="#cb129-187" aria-hidden="true" tabindex="-1"></a>animals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"bat"</span>, <span class="st">"cat"</span>)</span>
<span id="cb129-188"><a href="#cb129-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-189"><a href="#cb129-189" aria-hidden="true" tabindex="-1"></a><span class="co"># utilizing logical values to pull specific values</span></span>
<span id="cb129-190"><a href="#cb129-190" aria-hidden="true" tabindex="-1"></a>weight_g[weight_g <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> weight_g <span class="sc">&gt;</span> <span class="dv">60</span> <span class="sc">|</span> weight_g <span class="sc">==</span> <span class="dv">50</span>]</span>
<span id="cb129-191"><a href="#cb129-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-192"><a href="#cb129-192" aria-hidden="true" tabindex="-1"></a><span class="co"># pull dog &amp; cat records</span></span>
<span id="cb129-193"><a href="#cb129-193" aria-hidden="true" tabindex="-1"></a>animals[animals <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"dog"</span>, <span class="st">"cat"</span>)]</span>
<span id="cb129-194"><a href="#cb129-194" aria-hidden="true" tabindex="-1"></a>animals[animals <span class="sc">==</span> <span class="st">"dog"</span> <span class="sc">|</span> animals <span class="sc">==</span> <span class="st">"cat"</span>]</span>
<span id="cb129-195"><a href="#cb129-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-196"><a href="#cb129-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-197"><a href="#cb129-197" aria-hidden="true" tabindex="-1"></a>Statistics</span>
<span id="cb129-198"><a href="#cb129-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-201"><a href="#cb129-201" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-202"><a href="#cb129-202" aria-hidden="true" tabindex="-1"></a><span class="co"># signaling missing data using NA</span></span>
<span id="cb129-203"><a href="#cb129-203" aria-hidden="true" tabindex="-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb129-204"><a href="#cb129-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-205"><a href="#cb129-205" aria-hidden="true" tabindex="-1"></a><span class="co"># get mean while ignoring missing data</span></span>
<span id="cb129-206"><a href="#cb129-206" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(heights, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb129-207"><a href="#cb129-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-208"><a href="#cb129-208" aria-hidden="true" tabindex="-1"></a><span class="co"># how to use mean</span></span>
<span id="cb129-209"><a href="#cb129-209" aria-hidden="true" tabindex="-1"></a><span class="co"># ?mean</span></span>
<span id="cb129-210"><a href="#cb129-210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-211"><a href="#cb129-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-212"><a href="#cb129-212" aria-hidden="true" tabindex="-1"></a><span class="fu">## Initial Steps</span></span>
<span id="cb129-213"><a href="#cb129-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-214"><a href="#cb129-214" aria-hidden="true" tabindex="-1"></a><span class="fu">### File Paths</span></span>
<span id="cb129-215"><a href="#cb129-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-216"><a href="#cb129-216" aria-hidden="true" tabindex="-1"></a>The <span class="in">`here`</span> package makes it easy to point to files starting from the project main directory.</span>
<span id="cb129-217"><a href="#cb129-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-218"><a href="#cb129-218" aria-hidden="true" tabindex="-1"></a><span class="in">```r</span></span>
<span id="cb129-219"><a href="#cb129-219" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"here"</span>, <span class="st">"janitor"</span>)</span>
<span id="cb129-220"><a href="#cb129-220" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-221"><a href="#cb129-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-222"><a href="#cb129-222" aria-hidden="true" tabindex="-1"></a><span class="fu">### Store Locally</span></span>
<span id="cb129-223"><a href="#cb129-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-224"><a href="#cb129-224" aria-hidden="true" tabindex="-1"></a>Loading file from repository and saving it locally on disk. It is always a good idea to structure the workspace--for more information, see <span class="co">[</span><span class="ot">Best Practices for Scientific Computing paper</span><span class="co">](http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1001745)</span>.</span>
<span id="cb129-225"><a href="#cb129-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-228"><a href="#cb129-228" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-229"><a href="#cb129-229" aria-hidden="true" tabindex="-1"></a>file_name <span class="ot">&lt;-</span> <span class="st">"portal_data_joined.csv"</span></span>
<span id="cb129-230"><a href="#cb129-230" aria-hidden="true" tabindex="-1"></a>file_path <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"data"</span>, file_name)</span>
<span id="cb129-231"><a href="#cb129-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-232"><a href="#cb129-232" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(file_path)) {</span>
<span id="cb129-233"><a href="#cb129-233" aria-hidden="true" tabindex="-1"></a>  <span class="fu">download.file</span>(</span>
<span id="cb129-234"><a href="#cb129-234" aria-hidden="true" tabindex="-1"></a>    <span class="at">url =</span> <span class="st">"https://ndownloader.figshare.com/files/2292169"</span>,</span>
<span id="cb129-235"><a href="#cb129-235" aria-hidden="true" tabindex="-1"></a>    <span class="at">destfile =</span> file_path</span>
<span id="cb129-236"><a href="#cb129-236" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-237"><a href="#cb129-237" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb129-238"><a href="#cb129-238" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-239"><a href="#cb129-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-240"><a href="#cb129-240" aria-hidden="true" tabindex="-1"></a><span class="fu">### Load Locally</span></span>
<span id="cb129-241"><a href="#cb129-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-244"><a href="#cb129-244" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-245"><a href="#cb129-245" aria-hidden="true" tabindex="-1"></a>surveys <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(file_path)</span>
<span id="cb129-246"><a href="#cb129-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-247"><a href="#cb129-247" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(surveys)</span>
<span id="cb129-248"><a href="#cb129-248" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-249"><a href="#cb129-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-250"><a href="#cb129-250" aria-hidden="true" tabindex="-1"></a><span class="fu">### Clean Names</span></span>
<span id="cb129-251"><a href="#cb129-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-254"><a href="#cb129-254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-255"><a href="#cb129-255" aria-hidden="true" tabindex="-1"></a>surveys <span class="ot">&lt;-</span> surveys <span class="sc">|&gt;</span> </span>
<span id="cb129-256"><a href="#cb129-256" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb129-257"><a href="#cb129-257" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-258"><a href="#cb129-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-259"><a href="#cb129-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-260"><a href="#cb129-260" aria-hidden="true" tabindex="-1"></a><span class="fu">### Inspecting Data</span></span>
<span id="cb129-261"><a href="#cb129-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-264"><a href="#cb129-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-265"><a href="#cb129-265" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(surveys) <span class="co"># data type</span></span>
<span id="cb129-266"><a href="#cb129-266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-267"><a href="#cb129-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-270"><a href="#cb129-270" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-271"><a href="#cb129-271" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(surveys) <span class="co"># structure</span></span>
<span id="cb129-272"><a href="#cb129-272" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-273"><a href="#cb129-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-276"><a href="#cb129-276" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-277"><a href="#cb129-277" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">|&gt;</span> </span>
<span id="cb129-278"><a href="#cb129-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">0</span>) <span class="sc">|&gt;</span> </span>
<span id="cb129-279"><a href="#cb129-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span>
<span id="cb129-280"><a href="#cb129-280" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-281"><a href="#cb129-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-284"><a href="#cb129-284" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-285"><a href="#cb129-285" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(surveys) <span class="co"># dimensions</span></span>
<span id="cb129-286"><a href="#cb129-286" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(surveys)</span>
<span id="cb129-287"><a href="#cb129-287" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(surveys)</span>
<span id="cb129-288"><a href="#cb129-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-289"><a href="#cb129-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-292"><a href="#cb129-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-293"><a href="#cb129-293" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(surveys)</span>
<span id="cb129-294"><a href="#cb129-294" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-295"><a href="#cb129-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-296"><a href="#cb129-296" aria-hidden="true" tabindex="-1"></a>Print top and bottom obervations</span>
<span id="cb129-297"><a href="#cb129-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-300"><a href="#cb129-300" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-301"><a href="#cb129-301" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(surveys)</span>
<span id="cb129-302"><a href="#cb129-302" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(surveys)</span>
<span id="cb129-303"><a href="#cb129-303" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-304"><a href="#cb129-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-305"><a href="#cb129-305" aria-hidden="true" tabindex="-1"></a>Retrieve specific element/row/column</span>
<span id="cb129-306"><a href="#cb129-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-309"><a href="#cb129-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-310"><a href="#cb129-310" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">1</span>, <span class="dv">1</span>] <span class="co"># element[1,1]</span></span>
<span id="cb129-311"><a href="#cb129-311" aria-hidden="true" tabindex="-1"></a>surveys[<span class="dv">1</span>, ] <span class="co"># row 1</span></span>
<span id="cb129-312"><a href="#cb129-312" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(surveys[, <span class="dv">1</span>]) <span class="co"># column 1</span></span>
<span id="cb129-313"><a href="#cb129-313" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(surveys<span class="sc">$</span>sex) <span class="co"># column by name</span></span>
<span id="cb129-314"><a href="#cb129-314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-315"><a href="#cb129-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-316"><a href="#cb129-316" aria-hidden="true" tabindex="-1"></a><span class="fu">### Dealing with Factor (Categorical) Columns</span></span>
<span id="cb129-317"><a href="#cb129-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-318"><a href="#cb129-318" aria-hidden="true" tabindex="-1"></a>R convert columns that contain characters to factors by default. Factors are treated as integer vectors. By default, R sorts levels in alphabetical order.</span>
<span id="cb129-319"><a href="#cb129-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-322"><a href="#cb129-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-323"><a href="#cb129-323" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(surveys<span class="sc">$</span>sex)</span>
<span id="cb129-324"><a href="#cb129-324" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(surveys<span class="sc">$</span>sex)</span>
<span id="cb129-325"><a href="#cb129-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-326"><a href="#cb129-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-327"><a href="#cb129-327" aria-hidden="true" tabindex="-1"></a>Reorder factors (to get better plots)</span>
<span id="cb129-328"><a href="#cb129-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-331"><a href="#cb129-331" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-332"><a href="#cb129-332" aria-hidden="true" tabindex="-1"></a>surveys<span class="sc">$</span>sex_ordered <span class="ot">&lt;-</span> <span class="fu">factor</span>(surveys<span class="sc">$</span>sex, <span class="at">level =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">""</span>))</span>
<span id="cb129-333"><a href="#cb129-333" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(surveys<span class="sc">$</span>sex_ordered)</span>
<span id="cb129-334"><a href="#cb129-334" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(surveys<span class="sc">$</span>sex_ordered)</span>
<span id="cb129-335"><a href="#cb129-335" aria-hidden="true" tabindex="-1"></a><span class="fu">nlevels</span>(surveys<span class="sc">$</span>sex_ordered)</span>
<span id="cb129-336"><a href="#cb129-336" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-337"><a href="#cb129-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-338"><a href="#cb129-338" aria-hidden="true" tabindex="-1"></a><span class="fu">### Basic Plotting</span></span>
<span id="cb129-339"><a href="#cb129-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-340"><a href="#cb129-340" aria-hidden="true" tabindex="-1"></a>Histogram</span>
<span id="cb129-341"><a href="#cb129-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-344"><a href="#cb129-344" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-345"><a href="#cb129-345" aria-hidden="true" tabindex="-1"></a><span class="co"># plot(surveys$sex)  # not possible</span></span>
<span id="cb129-346"><a href="#cb129-346" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surveys<span class="sc">$</span>sex_ordered)</span>
<span id="cb129-347"><a href="#cb129-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-348"><a href="#cb129-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-349"><a href="#cb129-349" aria-hidden="true" tabindex="-1"></a>Enhance the plot</span>
<span id="cb129-350"><a href="#cb129-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-353"><a href="#cb129-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-354"><a href="#cb129-354" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(surveys<span class="sc">$</span>sex_ordered)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Female"</span></span>
<span id="cb129-355"><a href="#cb129-355" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(surveys<span class="sc">$</span>sex_ordered)[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="st">"Male"</span></span>
<span id="cb129-356"><a href="#cb129-356" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(surveys<span class="sc">$</span>sex_ordered)</span>
<span id="cb129-357"><a href="#cb129-357" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-358"><a href="#cb129-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-359"><a href="#cb129-359" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Manipulation</span></span>
<span id="cb129-360"><a href="#cb129-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-361"><a href="#cb129-361" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tdlyr`</span></span>
<span id="cb129-362"><a href="#cb129-362" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>makes manipulation of data easier</span>
<span id="cb129-363"><a href="#cb129-363" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>built to work with data frames directly</span>
<span id="cb129-364"><a href="#cb129-364" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>can directly work with data stored in an external database which give the advantage of only bringing what we need to the memory to work on without having to bring the whole database</span>
<span id="cb129-365"><a href="#cb129-365" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`tidyr`</span></span>
<span id="cb129-366"><a href="#cb129-366" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>allows to swiftly convert b/w different data formats for plotting &amp; analysis in order to accommodate the different requirements by different functions</span>
<span id="cb129-367"><a href="#cb129-367" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>sometime we want one row per measurement</span>
<span id="cb129-368"><a href="#cb129-368" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>other times we want the data aggregated like when plotting</span>
<span id="cb129-369"><a href="#cb129-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-370"><a href="#cb129-370" aria-hidden="true" tabindex="-1"></a>Before using <span class="in">`tdlyr`</span> and <span class="in">`tidyr`</span>:</span>
<span id="cb129-371"><a href="#cb129-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-372"><a href="#cb129-372" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Install <span class="in">`tidyverse`</span> package: umbrella-package that install several packages (tidyr, dplyr, ggplot2 tibble, magrittr, etc.)</span>
<span id="cb129-373"><a href="#cb129-373" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Load the package each session</span>
<span id="cb129-374"><a href="#cb129-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-375"><a href="#cb129-375" aria-hidden="true" tabindex="-1"></a>Load packages</span>
<span id="cb129-376"><a href="#cb129-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-379"><a href="#cb129-379" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-380"><a href="#cb129-380" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb129-381"><a href="#cb129-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-382"><a href="#cb129-382" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb129-383"><a href="#cb129-383" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-384"><a href="#cb129-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-385"><a href="#cb129-385" aria-hidden="true" tabindex="-1"></a>Load &amp; inspect data</span>
<span id="cb129-386"><a href="#cb129-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-389"><a href="#cb129-389" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-390"><a href="#cb129-390" aria-hidden="true" tabindex="-1"></a><span class="co"># notice the '_' instead of '.' of basic R</span></span>
<span id="cb129-391"><a href="#cb129-391" aria-hidden="true" tabindex="-1"></a>surveys <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"portal_data_joined.csv"</span>))</span>
<span id="cb129-392"><a href="#cb129-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-393"><a href="#cb129-393" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(surveys) <span class="co"># structure: tbl_df (tibble)</span></span>
<span id="cb129-394"><a href="#cb129-394" aria-hidden="true" tabindex="-1"></a><span class="co"># view(surveys) # preview in the viewer window, avoid when rendering</span></span>
<span id="cb129-395"><a href="#cb129-395" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-396"><a href="#cb129-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-397"><a href="#cb129-397" aria-hidden="true" tabindex="-1"></a><span class="fu">### Selection</span></span>
<span id="cb129-398"><a href="#cb129-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-399"><a href="#cb129-399" aria-hidden="true" tabindex="-1"></a>Select certain columns</span>
<span id="cb129-400"><a href="#cb129-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-403"><a href="#cb129-403" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-404"><a href="#cb129-404" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(surveys, plot_id, species_id, weight)</span>
<span id="cb129-405"><a href="#cb129-405" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-406"><a href="#cb129-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-407"><a href="#cb129-407" aria-hidden="true" tabindex="-1"></a>Select all columns except ...</span>
<span id="cb129-408"><a href="#cb129-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-411"><a href="#cb129-411" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-412"><a href="#cb129-412" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(surveys, <span class="sc">-</span>sex)</span>
<span id="cb129-413"><a href="#cb129-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-414"><a href="#cb129-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-415"><a href="#cb129-415" aria-hidden="true" tabindex="-1"></a>Select rows based on criteria</span>
<span id="cb129-416"><a href="#cb129-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-419"><a href="#cb129-419" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-420"><a href="#cb129-420" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(surveys, year <span class="sc">==</span> <span class="dv">1995</span>)</span>
<span id="cb129-421"><a href="#cb129-421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-422"><a href="#cb129-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-423"><a href="#cb129-423" aria-hidden="true" tabindex="-1"></a><span class="fu">### Piping</span></span>
<span id="cb129-424"><a href="#cb129-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-425"><a href="#cb129-425" aria-hidden="true" tabindex="-1"></a>Sending the results of one function to another</span>
<span id="cb129-426"><a href="#cb129-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-429"><a href="#cb129-429" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-430"><a href="#cb129-430" aria-hidden="true" tabindex="-1"></a><span class="co"># in multiple steps</span></span>
<span id="cb129-431"><a href="#cb129-431" aria-hidden="true" tabindex="-1"></a>survey_less5 <span class="ot">&lt;-</span> <span class="fu">filter</span>(surveys, weight <span class="sc">&lt;</span> <span class="dv">5</span>)</span>
<span id="cb129-432"><a href="#cb129-432" aria-hidden="true" tabindex="-1"></a>survey_sml <span class="ot">&lt;-</span> <span class="fu">select</span>(survey_less5, species_id, sex, weight)</span>
<span id="cb129-433"><a href="#cb129-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-434"><a href="#cb129-434" aria-hidden="true" tabindex="-1"></a><span class="co"># in one long step</span></span>
<span id="cb129-435"><a href="#cb129-435" aria-hidden="true" tabindex="-1"></a>survey_sml <span class="ot">&lt;-</span> <span class="fu">select</span>(<span class="fu">filter</span>(surveys, weight <span class="sc">&lt;</span> <span class="dv">5</span>), species_id, sex, weight)</span>
<span id="cb129-436"><a href="#cb129-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-437"><a href="#cb129-437" aria-hidden="true" tabindex="-1"></a><span class="co"># using pipe %&gt;% of magritter package.  Use Ctrl + Shift + M to add</span></span>
<span id="cb129-438"><a href="#cb129-438" aria-hidden="true" tabindex="-1"></a>survey_sml <span class="ot">&lt;-</span> surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-439"><a href="#cb129-439" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-440"><a href="#cb129-440" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(species_id, sex, weight)</span>
<span id="cb129-441"><a href="#cb129-441" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-442"><a href="#cb129-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-443"><a href="#cb129-443" aria-hidden="true" tabindex="-1"></a><span class="fu">### Summary</span></span>
<span id="cb129-444"><a href="#cb129-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-445"><a href="#cb129-445" aria-hidden="true" tabindex="-1"></a>Summary of groups (1+ columns)</span>
<span id="cb129-446"><a href="#cb129-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-447"><a href="#cb129-447" aria-hidden="true" tabindex="-1"></a>one factor</span>
<span id="cb129-448"><a href="#cb129-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-451"><a href="#cb129-451" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-452"><a href="#cb129-452" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-453"><a href="#cb129-453" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-454"><a href="#cb129-454" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb129-455"><a href="#cb129-455" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-456"><a href="#cb129-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-457"><a href="#cb129-457" aria-hidden="true" tabindex="-1"></a>two factors</span>
<span id="cb129-458"><a href="#cb129-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-461"><a href="#cb129-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-462"><a href="#cb129-462" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-463"><a href="#cb129-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(sex, species) <span class="sc">%&gt;%</span></span>
<span id="cb129-464"><a href="#cb129-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb129-465"><a href="#cb129-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-466"><a href="#cb129-466" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-467"><a href="#cb129-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-468"><a href="#cb129-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb129-469"><a href="#cb129-469" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-470"><a href="#cb129-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-471"><a href="#cb129-471" aria-hidden="true" tabindex="-1"></a>to avoid using <span class="in">`na.rm = FALSE`</span> each statistics</span>
<span id="cb129-472"><a href="#cb129-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-475"><a href="#cb129-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-476"><a href="#cb129-476" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-477"><a href="#cb129-477" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight)) <span class="sc">%&gt;%</span></span>
<span id="cb129-478"><a href="#cb129-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-479"><a href="#cb129-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight), <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight), <span class="at">sd_count =</span> <span class="fu">n</span>())</span>
<span id="cb129-480"><a href="#cb129-480" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-481"><a href="#cb129-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-482"><a href="#cb129-482" aria-hidden="true" tabindex="-1"></a>arrange by mean weight</span>
<span id="cb129-483"><a href="#cb129-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-486"><a href="#cb129-486" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-487"><a href="#cb129-487" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-488"><a href="#cb129-488" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight)) <span class="sc">%&gt;%</span></span>
<span id="cb129-489"><a href="#cb129-489" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-490"><a href="#cb129-490" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight), <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight), <span class="at">sd_count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb129-491"><a href="#cb129-491" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_weight)</span>
<span id="cb129-492"><a href="#cb129-492" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-493"><a href="#cb129-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-494"><a href="#cb129-494" aria-hidden="true" tabindex="-1"></a>in descending order</span>
<span id="cb129-495"><a href="#cb129-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-498"><a href="#cb129-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-499"><a href="#cb129-499" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-500"><a href="#cb129-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight)) <span class="sc">%&gt;%</span></span>
<span id="cb129-501"><a href="#cb129-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-502"><a href="#cb129-502" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight), <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight), <span class="at">sd_count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb129-503"><a href="#cb129-503" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_weight))</span>
<span id="cb129-504"><a href="#cb129-504" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-505"><a href="#cb129-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-506"><a href="#cb129-506" aria-hidden="true" tabindex="-1"></a>by count</span>
<span id="cb129-507"><a href="#cb129-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-510"><a href="#cb129-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-511"><a href="#cb129-511" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-512"><a href="#cb129-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight)) <span class="sc">%&gt;%</span></span>
<span id="cb129-513"><a href="#cb129-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, sex) <span class="sc">%&gt;%</span></span>
<span id="cb129-514"><a href="#cb129-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight), <span class="at">sd_weight =</span> <span class="fu">sd</span>(weight), <span class="at">sd_count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb129-515"><a href="#cb129-515" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(sd_count)</span>
<span id="cb129-516"><a href="#cb129-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-517"><a href="#cb129-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-518"><a href="#cb129-518" aria-hidden="true" tabindex="-1"></a><span class="fu">### Count</span></span>
<span id="cb129-519"><a href="#cb129-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-520"><a href="#cb129-520" aria-hidden="true" tabindex="-1"></a>Count of a categorical column</span>
<span id="cb129-521"><a href="#cb129-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-524"><a href="#cb129-524" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-525"><a href="#cb129-525" aria-hidden="true" tabindex="-1"></a>surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-526"><a href="#cb129-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(sex)</span>
<span id="cb129-527"><a href="#cb129-527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-528"><a href="#cb129-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-529"><a href="#cb129-529" aria-hidden="true" tabindex="-1"></a><span class="fu">### Reshaping</span></span>
<span id="cb129-530"><a href="#cb129-530" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-531"><a href="#cb129-531" aria-hidden="true" tabindex="-1"></a>Using gather &amp; spreed</span>
<span id="cb129-532"><a href="#cb129-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-533"><a href="#cb129-533" aria-hidden="true" tabindex="-1"></a>prepare the needed data first</span>
<span id="cb129-534"><a href="#cb129-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-537"><a href="#cb129-537" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-538"><a href="#cb129-538" aria-hidden="true" tabindex="-1"></a>surveys_gw <span class="ot">&lt;-</span> surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-539"><a href="#cb129-539" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight)) <span class="sc">%&gt;%</span></span>
<span id="cb129-540"><a href="#cb129-540" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(genus, plot_id) <span class="sc">%&gt;%</span></span>
<span id="cb129-541"><a href="#cb129-541" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_weight =</span> <span class="fu">mean</span>(weight))</span>
<span id="cb129-542"><a href="#cb129-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-543"><a href="#cb129-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-544"><a href="#cb129-544" aria-hidden="true" tabindex="-1"></a>creating a 2D table where each dimension represent a category the cell will represent a statistics</span>
<span id="cb129-545"><a href="#cb129-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-548"><a href="#cb129-548" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-549"><a href="#cb129-549" aria-hidden="true" tabindex="-1"></a>surveys_spread <span class="ot">&lt;-</span> surveys_gw <span class="sc">%&gt;%</span></span>
<span id="cb129-550"><a href="#cb129-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">spread</span>(<span class="at">key =</span> genus, <span class="at">value =</span> mean_weight)</span>
<span id="cb129-551"><a href="#cb129-551" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(surveys_spread)</span>
<span id="cb129-552"><a href="#cb129-552" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(surveys_spread)</span>
<span id="cb129-553"><a href="#cb129-553" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-554"><a href="#cb129-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-555"><a href="#cb129-555" aria-hidden="true" tabindex="-1"></a>bring spread back</span>
<span id="cb129-556"><a href="#cb129-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-559"><a href="#cb129-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-560"><a href="#cb129-560" aria-hidden="true" tabindex="-1"></a>surveys_gw <span class="ot">&lt;-</span> surveys_spread <span class="sc">%&gt;%</span></span>
<span id="cb129-561"><a href="#cb129-561" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>(<span class="at">key =</span> genus, <span class="at">value =</span> mean_weight, <span class="sc">-</span>plot_id)</span>
<span id="cb129-562"><a href="#cb129-562" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(surveys_gw)</span>
<span id="cb129-563"><a href="#cb129-563" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(surveys_gw)</span>
<span id="cb129-564"><a href="#cb129-564" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-565"><a href="#cb129-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-566"><a href="#cb129-566" aria-hidden="true" tabindex="-1"></a><span class="fu">### Filtering</span></span>
<span id="cb129-567"><a href="#cb129-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-568"><a href="#cb129-568" aria-hidden="true" tabindex="-1"></a>Remove missing data</span>
<span id="cb129-569"><a href="#cb129-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-572"><a href="#cb129-572" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-573"><a href="#cb129-573" aria-hidden="true" tabindex="-1"></a>survey_complete <span class="ot">&lt;-</span> surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-574"><a href="#cb129-574" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(weight), <span class="sc">!</span><span class="fu">is.na</span>(hindfoot_length), <span class="sc">!</span><span class="fu">is.na</span>(sex))</span>
<span id="cb129-575"><a href="#cb129-575" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-576"><a href="#cb129-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-577"><a href="#cb129-577" aria-hidden="true" tabindex="-1"></a>Filter those that has sample greater than 50</span>
<span id="cb129-578"><a href="#cb129-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-581"><a href="#cb129-581" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-582"><a href="#cb129-582" aria-hidden="true" tabindex="-1"></a>species_counts <span class="ot">&lt;-</span> survey_complete <span class="sc">%&gt;%</span></span>
<span id="cb129-583"><a href="#cb129-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species_id) <span class="sc">%&gt;%</span></span>
<span id="cb129-584"><a href="#cb129-584" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;=</span> <span class="dv">50</span>)</span>
<span id="cb129-585"><a href="#cb129-585" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-586"><a href="#cb129-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-587"><a href="#cb129-587" aria-hidden="true" tabindex="-1"></a>filter only those in the indicated category</span>
<span id="cb129-588"><a href="#cb129-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-591"><a href="#cb129-591" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-592"><a href="#cb129-592" aria-hidden="true" tabindex="-1"></a>surveys_com <span class="ot">&lt;-</span> surveys <span class="sc">%&gt;%</span></span>
<span id="cb129-593"><a href="#cb129-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species_id <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"albigula"</span>, <span class="st">"eremicus"</span>))</span>
<span id="cb129-594"><a href="#cb129-594" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-595"><a href="#cb129-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-596"><a href="#cb129-596" aria-hidden="true" tabindex="-1"></a><span class="fu">### Saving to disk</span></span>
<span id="cb129-597"><a href="#cb129-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-600"><a href="#cb129-600" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-601"><a href="#cb129-601" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb129-602"><a href="#cb129-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-603"><a href="#cb129-603" aria-hidden="true" tabindex="-1"></a><span class="fu">write_cvs</span>()</span>
<span id="cb129-604"><a href="#cb129-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-605"><a href="#cb129-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-606"><a href="#cb129-606" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualization</span></span>
<span id="cb129-607"><a href="#cb129-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-608"><a href="#cb129-608" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Help in making complex plots from data frames in simple steps</span>
<span id="cb129-609"><a href="#cb129-609" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>ggplot graphics are built step by step by adding new elements; this makes it flexible as well as customization</span>
<span id="cb129-610"><a href="#cb129-610" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To get list of ggplot2 geometric objects: <span class="in">`help.search("gemo_", package="ggplot2")`</span></span>
<span id="cb129-611"><a href="#cb129-611" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>To know the aesthetic specification each geom_ can take: <span class="in">`vignette("ggplot2-specs")`</span></span>
<span id="cb129-612"><a href="#cb129-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-613"><a href="#cb129-613" aria-hidden="true" tabindex="-1"></a>Step 1: Bind the plot to specific data frame</span>
<span id="cb129-614"><a href="#cb129-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-617"><a href="#cb129-617" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-618"><a href="#cb129-618" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb129-619"><a href="#cb129-619" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_complete,</span>
<span id="cb129-620"><a href="#cb129-620" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> weight, <span class="at">y =</span> hindfoot_length)</span>
<span id="cb129-621"><a href="#cb129-621" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-622"><a href="#cb129-622" aria-hidden="true" tabindex="-1"></a>surveys_plot</span>
<span id="cb129-623"><a href="#cb129-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-624"><a href="#cb129-624" aria-hidden="true" tabindex="-1"></a><span class="co"># Color for each group</span></span>
<span id="cb129-625"><a href="#cb129-625" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb129-626"><a href="#cb129-626" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_complete,</span>
<span id="cb129-627"><a href="#cb129-627" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> weight, <span class="at">y =</span> hindfoot_length),</span>
<span id="cb129-628"><a href="#cb129-628" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> species_id</span>
<span id="cb129-629"><a href="#cb129-629" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-630"><a href="#cb129-630" aria-hidden="true" tabindex="-1"></a>surveys_plot</span>
<span id="cb129-631"><a href="#cb129-631" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-632"><a href="#cb129-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-633"><a href="#cb129-633" aria-hidden="true" tabindex="-1"></a>Step 2: Select the type of the plot</span>
<span id="cb129-634"><a href="#cb129-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-635"><a href="#cb129-635" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>scatter plot, dot plots, etc. <span class="sc">\&gt;</span> geom_point()</span>
<span id="cb129-636"><a href="#cb129-636" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>boxplots <span class="sc">\&gt;</span> geom_boxplot()</span>
<span id="cb129-637"><a href="#cb129-637" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>trend lines, time series, etc. <span class="sc">\&gt;</span> geom_line()</span>
<span id="cb129-638"><a href="#cb129-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-639"><a href="#cb129-639" aria-hidden="true" tabindex="-1"></a><span class="fu">### Scatter plot</span></span>
<span id="cb129-640"><a href="#cb129-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-643"><a href="#cb129-643" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-644"><a href="#cb129-644" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb129-645"><a href="#cb129-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-646"><a href="#cb129-646" aria-hidden="true" tabindex="-1"></a><span class="co"># add transparency</span></span>
<span id="cb129-647"><a href="#cb129-647" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span>
<span id="cb129-648"><a href="#cb129-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-649"><a href="#cb129-649" aria-hidden="true" tabindex="-1"></a><span class="co"># color if not used in binding</span></span>
<span id="cb129-650"><a href="#cb129-650" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb129-651"><a href="#cb129-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-652"><a href="#cb129-652" aria-hidden="true" tabindex="-1"></a><span class="co"># add color if not used in binding</span></span>
<span id="cb129-653"><a href="#cb129-653" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="fu">aes</span>(<span class="at">color =</span> species_id))</span>
<span id="cb129-654"><a href="#cb129-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-655"><a href="#cb129-655" aria-hidden="true" tabindex="-1"></a><span class="co"># make the color blend by introducing small random variation in points locations</span></span>
<span id="cb129-656"><a href="#cb129-656" aria-hidden="true" tabindex="-1"></a><span class="co"># used when having small data sets</span></span>
<span id="cb129-657"><a href="#cb129-657" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span>
<span id="cb129-658"><a href="#cb129-658" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-659"><a href="#cb129-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-660"><a href="#cb129-660" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boxplot</span></span>
<span id="cb129-661"><a href="#cb129-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-664"><a href="#cb129-664" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-665"><a href="#cb129-665" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb129-666"><a href="#cb129-666" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> survey_complete,</span>
<span id="cb129-667"><a href="#cb129-667" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> species_id, <span class="at">y =</span> weight)</span>
<span id="cb129-668"><a href="#cb129-668" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-669"><a href="#cb129-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-670"><a href="#cb129-670" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span>
<span id="cb129-671"><a href="#cb129-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-672"><a href="#cb129-672" aria-hidden="true" tabindex="-1"></a><span class="co"># show data</span></span>
<span id="cb129-673"><a href="#cb129-673" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb129-674"><a href="#cb129-674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">color =</span> <span class="st">"tomato"</span>)</span>
<span id="cb129-675"><a href="#cb129-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-676"><a href="#cb129-676" aria-hidden="true" tabindex="-1"></a><span class="co"># bring boxplot layer in front</span></span>
<span id="cb129-677"><a href="#cb129-677" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">color =</span> <span class="st">"tomato"</span>) <span class="sc">+</span></span>
<span id="cb129-678"><a href="#cb129-678" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>)</span>
<span id="cb129-679"><a href="#cb129-679" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-680"><a href="#cb129-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-681"><a href="#cb129-681" aria-hidden="true" tabindex="-1"></a><span class="fu">### Time series data</span></span>
<span id="cb129-682"><a href="#cb129-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-685"><a href="#cb129-685" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-686"><a href="#cb129-686" aria-hidden="true" tabindex="-1"></a><span class="co"># create appropriate dataset</span></span>
<span id="cb129-687"><a href="#cb129-687" aria-hidden="true" tabindex="-1"></a>yearly_count <span class="ot">&lt;-</span> survey_complete <span class="sc">%&gt;%</span></span>
<span id="cb129-688"><a href="#cb129-688" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, species_id)</span>
<span id="cb129-689"><a href="#cb129-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-690"><a href="#cb129-690" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb129-691"><a href="#cb129-691" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> yearly_count,</span>
<span id="cb129-692"><a href="#cb129-692" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n)</span>
<span id="cb129-693"><a href="#cb129-693" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-694"><a href="#cb129-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-695"><a href="#cb129-695" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>()</span>
<span id="cb129-696"><a href="#cb129-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-697"><a href="#cb129-697" aria-hidden="true" tabindex="-1"></a><span class="co"># make it more meaningful by breaking it by category</span></span>
<span id="cb129-698"><a href="#cb129-698" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> species_id))</span>
<span id="cb129-699"><a href="#cb129-699" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-700"><a href="#cb129-700" aria-hidden="true" tabindex="-1"></a><span class="co"># make it more colorful</span></span>
<span id="cb129-701"><a href="#cb129-701" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> species_id))</span>
<span id="cb129-702"><a href="#cb129-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-703"><a href="#cb129-703" aria-hidden="true" tabindex="-1"></a><span class="co"># split into multiple plots</span></span>
<span id="cb129-704"><a href="#cb129-704" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>species_id)</span>
<span id="cb129-705"><a href="#cb129-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-706"><a href="#cb129-706" aria-hidden="true" tabindex="-1"></a><span class="co"># split the line in each plot by sex</span></span>
<span id="cb129-707"><a href="#cb129-707" aria-hidden="true" tabindex="-1"></a>yearly_sex_counts <span class="ot">&lt;-</span> survey_complete <span class="sc">%&gt;%</span></span>
<span id="cb129-708"><a href="#cb129-708" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(year, species_id, sex)</span>
<span id="cb129-709"><a href="#cb129-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-710"><a href="#cb129-710" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(</span>
<span id="cb129-711"><a href="#cb129-711" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> yearly_sex_counts,</span>
<span id="cb129-712"><a href="#cb129-712" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n)</span>
<span id="cb129-713"><a href="#cb129-713" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-714"><a href="#cb129-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-715"><a href="#cb129-715" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb129-716"><a href="#cb129-716" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species_id)</span>
<span id="cb129-717"><a href="#cb129-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-718"><a href="#cb129-718" aria-hidden="true" tabindex="-1"></a><span class="co"># remove background</span></span>
<span id="cb129-719"><a href="#cb129-719" aria-hidden="true" tabindex="-1"></a>surveys_plot <span class="sc">+</span> <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> sex)) <span class="sc">+</span></span>
<span id="cb129-720"><a href="#cb129-720" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>species_id) <span class="sc">+</span></span>
<span id="cb129-721"><a href="#cb129-721" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb129-722"><a href="#cb129-722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid =</span> <span class="fu">element_blank</span>())</span>
<span id="cb129-723"><a href="#cb129-723" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-724"><a href="#cb129-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-725"><a href="#cb129-725" aria-hidden="true" tabindex="-1"></a><span class="fu">## Colors</span></span>
<span id="cb129-726"><a href="#cb129-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-727"><a href="#cb129-727" aria-hidden="true" tabindex="-1"></a><span class="fu">### cols4all package</span></span>
<span id="cb129-728"><a href="#cb129-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-729"><a href="#cb129-729" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">cols4all package</span><span class="co">](https://cols4all.github.io/cols4all-R/)</span> by <span class="co">[</span><span class="ot">Martijn Tennekes</span><span class="co">](https://10mapz.com/)</span> helps select color palettes.</span>
<span id="cb129-730"><a href="#cb129-730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-731"><a href="#cb129-731" aria-hidden="true" tabindex="-1"></a>The main tool in the package is a dashboard that can be started using the following line:</span>
<span id="cb129-732"><a href="#cb129-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-735"><a href="#cb129-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-736"><a href="#cb129-736" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb129-737"><a href="#cb129-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-738"><a href="#cb129-738" aria-hidden="true" tabindex="-1"></a><span class="fu">c4a_gui</span>()</span>
<span id="cb129-739"><a href="#cb129-739" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-740"><a href="#cb129-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-741"><a href="#cb129-741" aria-hidden="true" tabindex="-1"></a><span class="fu">## Spatial Data</span></span>
<span id="cb129-742"><a href="#cb129-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-743"><a href="#cb129-743" aria-hidden="true" tabindex="-1"></a><span class="fu">### Projections</span></span>
<span id="cb129-744"><a href="#cb129-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-745"><a href="#cb129-745" aria-hidden="true" tabindex="-1"></a>An overview of common projections for Earth is provided by <span class="co">[</span><span class="ot">USGS (pdf)</span><span class="co">](https://pubs.usgs.gov/gip/70047422/report.pdf)</span></span>
<span id="cb129-746"><a href="#cb129-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-749"><a href="#cb129-749" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-750"><a href="#cb129-750" aria-hidden="true" tabindex="-1"></a><span class="co"># download world map in small resolution as an sf object</span></span>
<span id="cb129-751"><a href="#cb129-751" aria-hidden="true" tabindex="-1"></a>world <span class="ot">&lt;-</span> <span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"small"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb129-752"><a href="#cb129-752" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world)</span>
<span id="cb129-753"><a href="#cb129-753" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(world)</span>
<span id="cb129-754"><a href="#cb129-754" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-755"><a href="#cb129-755" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mercator Projection, Default</span></span>
<span id="cb129-756"><a href="#cb129-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-759"><a href="#cb129-759" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-760"><a href="#cb129-760" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|&gt;</span> </span>
<span id="cb129-761"><a href="#cb129-761" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb129-762"><a href="#cb129-762" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>()</span>
<span id="cb129-763"><a href="#cb129-763" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-764"><a href="#cb129-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-765"><a href="#cb129-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-766"><a href="#cb129-766" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Lambert Azimuthal Equal-Area Projection</span></span>
<span id="cb129-767"><a href="#cb129-767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-770"><a href="#cb129-770" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-771"><a href="#cb129-771" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|&gt;</span> </span>
<span id="cb129-772"><a href="#cb129-772" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb129-773"><a href="#cb129-773" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb129-774"><a href="#cb129-774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="st">"+proj=laea"</span>)</span>
<span id="cb129-775"><a href="#cb129-775" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-776"><a href="#cb129-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-777"><a href="#cb129-777" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Foucaut Projection</span></span>
<span id="cb129-778"><a href="#cb129-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-781"><a href="#cb129-781" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-782"><a href="#cb129-782" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|&gt;</span> </span>
<span id="cb129-783"><a href="#cb129-783" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb129-784"><a href="#cb129-784" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb129-785"><a href="#cb129-785" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="st">"+proj=fouc"</span>)</span>
<span id="cb129-786"><a href="#cb129-786" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-787"><a href="#cb129-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-788"><a href="#cb129-788" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Natural Earch II Projection</span></span>
<span id="cb129-789"><a href="#cb129-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-792"><a href="#cb129-792" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-793"><a href="#cb129-793" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|&gt;</span> </span>
<span id="cb129-794"><a href="#cb129-794" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb129-795"><a href="#cb129-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb129-796"><a href="#cb129-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> <span class="st">"+proj=natearth2"</span>)</span>
<span id="cb129-797"><a href="#cb129-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-798"><a href="#cb129-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-799"><a href="#cb129-799" aria-hidden="true" tabindex="-1"></a><span class="fu">#### EPSG Codes</span></span>
<span id="cb129-800"><a href="#cb129-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-801"><a href="#cb129-801" aria-hidden="true" tabindex="-1"></a>If the projection has an <span class="co">[</span><span class="ot">EPSG code (html)</span><span class="co">](https://epsg.io/?q=%20kind%3ACRS)</span>, it can be used instead as follows:</span>
<span id="cb129-802"><a href="#cb129-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-805"><a href="#cb129-805" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-806"><a href="#cb129-806" aria-hidden="true" tabindex="-1"></a>world <span class="sc">|&gt;</span> </span>
<span id="cb129-807"><a href="#cb129-807" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb129-808"><a href="#cb129-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb129-809"><a href="#cb129-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">crs =</span> sf<span class="sc">::</span><span class="fu">st_crs</span>(<span class="dv">27700</span>))</span>
<span id="cb129-810"><a href="#cb129-810" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-811"><a href="#cb129-811" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-812"><a href="#cb129-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-813"><a href="#cb129-813" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-814"><a href="#cb129-814" aria-hidden="true" tabindex="-1"></a><span class="fu">## References</span></span>
<span id="cb129-815"><a href="#cb129-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-816"><a href="#cb129-816" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>OU Software Carpentry Workshop (check other workshops <span class="co">[</span><span class="ot">here</span><span class="co">](https://libraries.ou.edu/content/software-and-data-carpentry)</span>)</span>
<span id="cb129-817"><a href="#cb129-817" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Main Tutorial</span><span class="co">](https://oulib-swc.github.io/2019-05-15-ou-swc/)</span></span>
<span id="cb129-818"><a href="#cb129-818" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Data Carpentry with R</span><span class="co">](https://datacarpentry.org/R-ecology-lesson/index.html)</span></span>
<span id="cb129-819"><a href="#cb129-819" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Software Carpentry with R</span><span class="co">](https://swcarpentry.github.io/r-novice-gapminder/)</span></span>
<span id="cb129-820"><a href="#cb129-820" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Etherpad</span><span class="co">](https://pad.carpentries.org/2019-05-15-ou-swc)</span></span>
<span id="cb129-821"><a href="#cb129-821" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="co">[</span><span class="ot">Google Doc</span><span class="co">](https://docs.google.com/document/d/1aJq_X1uhaNkUj7qdZEzOcpc2Pky7eZPy76yqs0UkfrQ/edit)</span></span>
<span id="cb129-822"><a href="#cb129-822" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Intro to ggplot</span><span class="co">](https://rawcdn.githack.com/allisonhorst/data-vis/fc107e063f50ef8695b0a75ed73d74720aca2c65/data_vis_np.html)</span> by <span class="co">[</span><span class="ot">Allison Horst</span><span class="co">](https://github.com/allisonhorst)</span></span>
<span id="cb129-823"><a href="#cb129-823" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">R for Data Science book by Garrett Grolemund and Hadley Wickham</span><span class="co">](https://r4ds.had.co.nz/)</span></span>
<span id="cb129-824"><a href="#cb129-824" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Best Practices for Scientific Computing paper</span><span class="co">](http://journals.plos.org/plosbiology/article?id=10.1371/journal.pbio.1001745)</span></span>
<span id="cb129-825"><a href="#cb129-825" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="co">[</span><span class="ot">R Manuals</span><span class="co">](https://rstudio.github.io/r-manuals/)</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hashcx/workspace/edit/main/src/notes/r.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hashcx/workspace/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>